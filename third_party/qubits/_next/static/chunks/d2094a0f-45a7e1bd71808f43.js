"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{96391:function(e,t,r){r.d(t,{BU:function(){return tF},CX:function(){return tg},mH:function(){return ty},ui:function(){return e8}});var a=r(6907),n=r.n(a),o=r(23279),i=r.n(o),s=r(23493),l=r.n(s),d=r(67294),c=r(94203),u=r(77493),f=r(58354),h=r(59619),g=r(73935);function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var m=(0,d.createContext)(null),E=()=>{var e=(0,d.useContext)(m);if(!e)throw Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},w=parseInt(d.version.split(".")[0],10),b="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,k="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),x="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),C="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),y="undefined"!=typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),D="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),O="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),T="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),S=x&&"undefined"!=typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),P="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),F="undefined"!=typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),R="undefined"!=typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),M=!!("undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement),B=(!T||!S)&&!D&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,N=new WeakMap,L=new WeakMap,W=new WeakMap,A=new WeakMap,j=new WeakMap,I=new WeakMap,q=new WeakMap,U=new WeakMap,z=new WeakMap,V=new WeakMap,_=new WeakMap,H=new WeakMap,K=new WeakMap,X=new WeakMap,Y=new WeakMap,$=new WeakMap,J=new WeakMap,Z=new WeakMap,G=new WeakMap,Q=new WeakMap,ee=new WeakMap,et=Symbol("placeholder"),er=Symbol("mark-placeholder"),ea=globalThis.Text,en=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,eo=e=>es(e)&&8===e.nodeType,ei=e=>es(e)&&1===e.nodeType,es=e=>{var t=en(e);return!!t&&e instanceof t.Node},el=e=>{var t=e&&e.anchorNode&&en(e.anchorNode);return!!t&&e instanceof t.Selection},ed=e=>es(e)&&3===e.nodeType,ec=e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length,eu=e=>{var[t,r]=e;if(ei(t)&&t.childNodes.length){var a=r===t.childNodes.length,n=a?r-1:r;for([t,n]=eh(t,n,a?"backward":"forward"),a=n<r;ei(t)&&t.childNodes.length;){var o=a?t.childNodes.length-1:0;t=eg(t,o,a?"backward":"forward")}r=a&&null!=t.textContent?t.textContent.length:0}return[t,r]},ef=e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1},eh=(e,t,r)=>{for(var{childNodes:a}=e,n=a[t],o=t,i=!1,s=!1;(eo(n)||ei(n)&&0===n.childNodes.length||ei(n)&&"false"===n.getAttribute("contenteditable"))&&(!i||!s);){if(o>=a.length){i=!0,o=t-1,r="backward";continue}if(o<0){s=!0,o=t+1,r="forward";continue}n=a[o],t=o,o+="forward"===r?1:-1}return[n,t]},eg=(e,t,r)=>{var[a]=eh(e,t,r);return a},ev=e=>{var t="";if(ed(e)&&e.nodeValue)return e.nodeValue;if(ei(e)){for(var r of Array.from(e.childNodes))t+=ev(r);var a=getComputedStyle(e).getPropertyValue("display");("block"===a||"list"===a||"BR"===e.tagName)&&(t+="\n")}return t},ep=/data-slate-fragment="(.+?)"/m,em=e=>{var[,t]=e.getData("text/html").match(ep)||[];return t},eE=(e,t,r)=>{var{target:a}=t;if(ei(a)&&a.matches('[contentEditable="false"]'))return!1;var{document:n}=ek.getWindow(e);if(n.contains(a))return ek.hasDOMNode(e,a,{editable:!0});var o=r.find(e=>{var{addedNodes:t,removedNodes:r}=e;for(var n of t)if(n===a||n.contains(a))return!0;for(var o of r)if(o===a||o.contains(a))return!0});return!!o&&o!==t&&eE(e,o,r)},ew=0;class eb{constructor(){this.id="".concat(ew++)}}var ek={androidPendingDiffs:e=>Z.get(e),androidScheduleFlush:e=>{var t;null===(t=Y.get(e))||void 0===t||t()},blur:e=>{var t=ek.toDOMNode(e,e),r=ek.findDocumentOrShadowRoot(e);_.set(e,!1),r.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,r=ek.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&u.Transforms.deselect(e)},findDocumentOrShadowRoot:e=>{var t=ek.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var r,{clientX:a,clientY:n,target:o}=t;if(null==a||null==n)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var i=ek.toSlateNode(e,t.target),s=ek.findPath(e,i);if(u.Element.isElement(i)&&u.Editor.isVoid(e,i)){var l=o.getBoundingClientRect(),d=e.isInline(i)?a-l.left<l.left+l.width-a:n-l.top<l.top+l.height-n,c=u.Editor.point(e,s,{edge:d?"start":"end"}),f=d?u.Editor.before(e,c):u.Editor.after(e,c);if(f)return u.Editor.range(e,f)}var{document:h}=ek.getWindow(e);if(h.caretRangeFromPoint)r=h.caretRangeFromPoint(a,n);else{var g=h.caretPositionFromPoint(a,n);g&&((r=h.createRange()).setStart(g.offsetNode,g.offset),r.setEnd(g.offsetNode,g.offset))}if(!r)throw Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return ek.toSlateRange(e,r,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var r=U.get(t);return r||(r=new eb,U.set(t,r)),r},findPath:(e,t)=>{for(var r=[],a=t;;){var n=L.get(a);if(null==n){if(u.Editor.isEditor(a))return r;break}var o=N.get(a);if(null==o)break;r.unshift(o),a=n}throw Error("Unable to find the path for Slate node: ".concat(u.Scrubber.stringify(t)))},focus:e=>{var t=ek.toDOMNode(e,e),r=ek.findDocumentOrShadowRoot(e);_.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},getWindow:e=>{var t=W.get(e);if(!t)throw Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:n=!1}=a,o=ek.toDOMNode(e,e);try{r=ei(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&r.closest("[data-slate-editor]")===o&&(!n||!!r.isContentEditable||"boolean"==typeof r.isContentEditable&&r.closest('[contenteditable="false"]')===o||!!r.getAttribute("data-slate-zero-width"))},hasEditableTarget:(e,t)=>es(t)&&ek.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:r,focus:a}=t;return u.Editor.hasPath(e,r.path)&&u.Editor.hasPath(e,a.path)},hasSelectableTarget:(e,t)=>ek.hasEditableTarget(e,t)||ek.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>es(t)&&ek.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!H.get(e),isFocused:e=>!!_.get(e),isReadOnly:e=>!!V.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(V.get(e))return!1;var r=ek.hasTarget(e,t)&&ek.toSlateNode(e,t);return u.Element.isElement(r)&&u.Editor.isVoid(e,r)},setFragmentData:(e,t,r)=>e.setFragmentData(t,r),toDOMNode:(e,t)=>{var r=z.get(e),a=u.Editor.isEditor(t)?A.get(e):null==r?void 0:r.get(ek.findKey(e,t));if(!a)throw Error("Cannot resolve a DOM node from Slate node: ".concat(u.Scrubber.stringify(t)));return a},toDOMPoint:(e,t)=>{var[r]=u.Editor.node(e,t.path),a=ek.toDOMNode(e,r);u.Editor.void(e,{at:t})&&(t={path:t.path,offset:0});for(var n=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),o=0,i=0;i<n.length;i++){var s=n[i],l=s.childNodes[0];if(null!=l&&null!=l.textContent){var{length:d}=l.textContent,c=s.getAttribute("data-slate-length"),f=o+(null==c?d:parseInt(c,10)),h=n[i+1];if(t.offset===f&&null!=h&&h.hasAttribute("data-slate-mark-placeholder")){var g,v,p=h.childNodes[0];g=[p instanceof ea?p:h,null!==(v=h.textContent)&&void 0!==v&&v.startsWith("\uFEFF")?1:0];break}if(t.offset<=f){g=[l,Math.min(d,Math.max(0,t.offset-o))];break}o=f}}if(!g)throw Error("Cannot resolve a DOM point from Slate point: ".concat(u.Scrubber.stringify(t)));return g},toDOMRange:(e,t)=>{var{anchor:r,focus:a}=t,n=u.Range.isBackward(t),o=ek.toDOMPoint(e,r),i=u.Range.isCollapsed(t)?o:ek.toDOMPoint(e,a),s=ek.getWindow(e).document.createRange(),[l,d]=n?i:o,[c,f]=n?o:i,h=!!(ei(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),g=!!(ei(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return s.setStart(l,h?1:d),s.setEnd(c,g?1:f),s},toSlateNode:(e,t)=>{var r=ei(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var a=r?I.get(r):null;if(!a)throw Error("Cannot resolve a Slate node from DOM node: ".concat(r));return a},toSlatePoint:(e,t,r)=>{var{exactMatch:a,suppressThrow:n}=r,[o,i]=a?t:eu(t),s=o.parentNode,l=null,d=0;if(s){var c,f,h=ek.toDOMNode(e,e),g=s.closest('[data-slate-void="true"]'),v=g&&h.contains(g)?g:null,p=s.closest("[data-slate-leaf]"),m=null;if(p){if(l=p.closest('[data-slate-node="text"]')){var E=ek.getWindow(e).document.createRange();E.setStart(l,0),E.setEnd(o,i);var w=E.cloneContents();[...Array.prototype.slice.call(w.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(w.querySelectorAll("[contenteditable=false]"))].forEach(e=>{if(x&&!a&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\uFEFF"!==e.textContext){e.textContent.startsWith("\uFEFF")&&(e.textContent=e.textContent.slice(1));return}e.parentNode.removeChild(e)}),d=w.textContent.length,m=l}}else if(v){for(var b=v.querySelectorAll("[data-slate-leaf]"),k=0;k<b.length;k++){var y=b[k];if(ek.hasDOMNode(e,y)){p=y;break}}p?(l=p.closest('[data-slate-node="text"]'),d=(m=p).textContent.length,m.querySelectorAll("[data-slate-zero-width]").forEach(e=>{d-=e.textContent.length})):d=1}m&&d===m.textContent.length&&x&&"z"===m.getAttribute("data-slate-zero-width")&&null!==(c=m.textContent)&&void 0!==c&&c.startsWith("\uFEFF")&&(s.hasAttribute("data-slate-zero-width")||C&&null!==(f=m.textContent)&&void 0!==f&&f.endsWith("\n\n"))&&d--}if(x&&!l&&!a){var D=s.hasAttribute("data-slate-node")?s:s.closest("[data-slate-node]");if(D&&ek.hasDOMNode(e,D,{editable:!0})){var O=ek.toSlateNode(e,D),{path:T,offset:S}=u.Editor.start(e,ek.findPath(e,O));return D.querySelector("[data-slate-leaf]")||(S=i),{path:T,offset:S}}}if(!l){if(n)return null;throw Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var P=ek.toSlateNode(e,l);return{path:ek.findPath(e,P),offset:d}},toSlateRange:(e,t,r)=>{var a,n,o,i,s,l,{exactMatch:d,suppressThrow:c}=r;if(el(t)?t.anchorNode:t.startContainer){if(el(t)){if(C&&t.rangeCount>1){o=t.focusNode;var f=t.getRangeAt(0),h=t.getRangeAt(t.rangeCount-1);if(o instanceof HTMLTableRowElement&&f.startContainer instanceof HTMLTableRowElement&&h.startContainer instanceof HTMLTableRowElement){function g(e){return e.childElementCount>0?g(e.children[0]):e}var v=f.startContainer,p=h.startContainer,m=g(v.children[f.startOffset]),E=g(p.children[h.startOffset]);i=0,a=E.childNodes.length>0?E.childNodes[0]:E,o=m.childNodes.length>0?m.childNodes[0]:m,n=E instanceof HTMLElement?E.innerHTML.length:0}else f.startContainer===o?(a=h.endContainer,n=h.endOffset,i=f.startOffset):(a=f.startContainer,n=f.endOffset,i=h.startOffset)}else a=t.anchorNode,n=t.anchorOffset,o=t.focusNode,i=t.focusOffset;s=O&&ef(a)||C?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else a=t.startContainer,n=t.startOffset,o=t.endContainer,i=t.endOffset,s=t.collapsed}if(null==a||null==o||null==n||null==i)throw Error("Cannot resolve a Slate range from DOM range: ".concat(t));"getAttribute"in o&&"false"===o.getAttribute("contenteditable")&&"true"!==o.getAttribute("data-slate-void")&&(o=a,i=(null===(l=a.textContent)||void 0===l?void 0:l.length)||0);var w=ek.toSlatePoint(e,[a,n],{exactMatch:d,suppressThrow:c});if(!w)return null;var b=s?w:ek.toSlatePoint(e,[o,i],{exactMatch:d,suppressThrow:c});if(!b)return null;var k={anchor:w,focus:b};return u.Range.isExpanded(k)&&u.Range.isForward(k)&&ei(o)&&u.Editor.void(e,{at:k.focus,mode:"highest"})&&(k=u.Editor.unhangRange(e,k,{voids:!0})),k}};function ex(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end),e)}function eC(e,t){var{start:r,end:a,text:n}=t,o=e.slice(r,a),i=function(e,t){for(var r=Math.min(e.length,t.length),a=0;a<r;a++)if(e.charAt(a)!==t.charAt(a))return a;return r}(o,n),s=Math.min(o.length-i,n.length-i),l=function(e,t,r){for(var a=Math.min(e.length,t.length,r),n=0;n<a;n++)if(e.charAt(e.length-n-1)!==t.charAt(t.length-n-1))return n;return a}(o,n,s),d={start:r+i,end:a-l,text:n.slice(i,n.length-l)};return d.start===d.end&&0===d.text.length?null:d}function ey(e,t){var{path:r,offset:a}=t;if(!u.Editor.hasPath(e,r))return null;var n=u.Node.get(e,r);if(!u.Text.isText(n))return null;var o=u.Editor.above(e,{match:t=>u.Element.isElement(t)&&u.Editor.isBlock(e,t),at:r});if(!o)return null;for(;a>n.text.length;){var i=u.Editor.next(e,{at:r,match:u.Text.isText});if(!i||!u.Path.isDescendant(i[1],o[1]))return null;a-=n.text.length,n=i[0],r=i[1]}return{path:r,offset:a}}function eD(e,t){var r=ey(e,t.anchor);if(!r)return null;if(u.Range.isCollapsed(t))return{anchor:r,focus:r};var a=ey(e,t.focus);return a?{anchor:r,focus:a}:null}function eO(e,t,r){var a=Z.get(e),n=null==a?void 0:a.find(e=>{var{path:r}=e;return u.Path.equals(r,t.path)});if(!n||t.offset<=n.diff.start)return u.Point.transform(t,r,{affinity:"backward"});var{diff:o}=n;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},s=u.Point.transform(i,r,{affinity:"backward"});return s?{path:s.path,offset:s.offset+t.offset-o.start}:null}var l={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=u.Point.transform(l,r,{affinity:"backward"});return d?"split_node"===r.type&&u.Path.equals(r.path,t.path)&&l.offset<r.position&&o.start<r.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function eT(e,t,r){var a=eO(e,t.anchor,r);if(!a)return null;if(u.Range.isCollapsed(t))return{anchor:a,focus:a};var n=eO(e,t.focus,r);return n?{anchor:a,focus:n}:null}function eS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function eP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var eF=function(){},eR=e=>(null==e?void 0:e.constructor.name)==="DataTransfer",eM=M?d.useLayoutEffect:d.useEffect,eB=["node"];function eN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var eL={subtree:!0,childList:!0,characterData:!0},eW=x?e=>{var t,{node:r}=e,a=p(e,eB);if(!x)return null;var n=E(),o=(t=(0,d.useRef)(!1),(0,d.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current),[i]=(0,d.useState)(()=>(function(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:a}=e,n=!1,o=null,i=null,s=null,l=0,d=!1,c=()=>{var e=Q.get(t);if(Q.delete(t),e){var{selection:r}=t,a=eD(t,e);!a||r&&u.Range.equals(a,r)||u.Transforms.select(t,a)}},f=()=>{var e=G.get(t);if(G.delete(t),e){if(e.at){var r=u.Point.isPoint(e.at)?ey(t,e.at):eD(t,e.at);if(!r)return;var a=u.Editor.range(t,r);t.selection&&u.Range.equals(t.selection,a)||u.Transforms.select(t,r)}e.run()}},h=()=>{if(i&&(clearTimeout(i),i=null),s&&(clearTimeout(s),s=null),!E()&&!m()){c();return}n||(n=!0,setTimeout(()=>n=!1)),m()&&(n="action");var e=t.selection&&u.Editor.rangeRef(t,t.selection,{affinity:"forward"});J.set(t,t.marks),eF("flush",G.get(t),Z.get(t));for(var o=E();l=null===(h=Z.get(t))||void 0===h?void 0:h[0];){var l,h,g,v=$.get(t);void 0!==v&&($.delete(t),t.marks=v),v&&!1===d&&(d=null);var p=function(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}(l);t.selection&&u.Range.equals(t.selection,p)||u.Transforms.select(t,p),l.diff.text?u.Editor.insertText(t,l.diff.text):u.Editor.deleteFragment(t),Z.set(t,null===(g=Z.get(t))||void 0===g?void 0:g.filter(e=>{var{id:t}=e;return t!==l.id})),!function(e,t){var{path:r,diff:a}=t;if(!u.Editor.hasPath(e,r))return!1;var n=u.Node.get(e,r);if(!u.Text.isText(n))return!1;if(a.start!==n.text.length||0===a.text.length)return n.text.slice(a.start,a.start+a.text.length)===a.text;var o=u.Path.next(r);if(!u.Editor.hasPath(e,o))return!1;var i=u.Node.get(e,o);return u.Text.isText(i)&&i.text.startsWith(a.text)}(t,l)&&(o=!1,G.delete(t),J.delete(t),n="action",Q.delete(t),r.cancel(),a.cancel(),null==e||e.unref())}var w=null==e?void 0:e.unref();if(!w||Q.get(t)||t.selection&&u.Range.equals(w,t.selection)||u.Transforms.select(t,w),m()){f();return}o&&r(),r.flush(),a.flush(),c();var b=J.get(t);J.delete(t),void 0!==b&&(t.marks=b,t.onChange())},g=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=j.get(t);if(r){if(E()||e){r.style.display="none";return}r.style.removeProperty("display")}},v=(e,r)=>{var a,n,o,i,s,d,c,f,h=null!==(f=Z.get(t))&&void 0!==f?f:[];Z.set(t,h);var v=u.Node.leaf(t,e),p=h.findIndex(t=>u.Path.equals(t.path,e));if(p<0){eC(v.text,r)&&h.push({path:e,diff:r,id:l++}),g();return}var m=(a=v.text,o=Math.min((n=h[p].diff).start,r.start),i=Math.max(0,Math.min(n.start+n.text.length,r.end)-r.start),s=ex(a,n,r),d=Math.max(r.start+r.text.length,n.start+n.text.length+(n.start+n.text.length>r.start?r.text.length:0)-i),c=s.slice(o,d),eC(a,{start:o,end:Math.max(n.end,r.end-n.text.length+(n.end-n.start)),text:c}));if(!m){h.splice(p,1),g();return}h[p]=eP(eP({},h[p]),{},{diff:m})},p=function(e){var{at:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,Q.delete(t),r.cancel(),a.cancel(),m()&&h(),G.set(t,{at:n,run:e}),s=setTimeout(h)},m=()=>!!G.get(t),E=()=>{var e;return!!(null!==(e=Z.get(t))&&void 0!==e&&e.length)},w=e=>{Q.set(t,e),i&&(clearTimeout(i),i=null);var{selection:r}=t;if(e){var a=!r||!u.Path.equals(r.anchor.path,e.anchor.path),n=!r||!u.Path.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(a&&d||n)&&(d=!1),(a||E())&&(i=setTimeout(h,200))}},b=()=>{m()||(s=setTimeout(h))};return{flush:h,scheduleFlush:b,hasPendingDiffs:E,hasPendingAction:m,hasPendingChanges:()=>m()||E(),isFlushing:()=>n,handleUserSelect:w,handleCompositionEnd:e=>{o&&clearTimeout(o),o=setTimeout(()=>{H.set(t,!1),h()},25)},handleCompositionStart:e=>{H.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:e=>{i&&(clearTimeout(i),i=null);var{inputType:r}=e,a=null,n=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==r&&"insertCompositionText"!==r&&(d=!1);var[o]=e.getTargetRanges();o&&(a=ek.toSlateRange(t,o,{exactMatch:!1,suppressThrow:!0}));var s=ek.getWindow(t).getSelection();if(!a&&s&&(o=s,a=ek.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),a=null!==(F=a)&&void 0!==F?F:t.selection){var l=!0;if(r.startsWith("delete")){if(u.Range.isExpanded(a)){var[c,f]=u.Range.edges(a);if(u.Node.leaf(t,c.path).text.length===c.offset&&0===f.offset){var h=u.Editor.next(t,{at:c.path,match:u.Text.isText});h&&u.Path.equals(h[1],f.path)&&(a={anchor:f,focus:f})}}var g=r.endsWith("Backward")?"backward":"forward",[m,E]=u.Range.edges(a),[k,x]=u.Editor.leaf(t,m.path),C={text:"",start:m.offset,end:E.offset},y=Z.get(t),D=null==y?void 0:y.find(e=>u.Path.equals(e.path,x)),O=D?[D.diff,C]:[C];if(0===ex(k.text,...O).length&&(l=!1),u.Range.isExpanded(a)){if(l&&u.Path.equals(a.anchor.path,a.focus.path)){var T={path:a.anchor.path,offset:m.offset};return w(u.Editor.range(t,T,T)),v(a.anchor.path,{text:"",end:E.offset,start:m.offset})}return p(()=>u.Editor.deleteFragment(t,{direction:g}),{at:a})}}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return p(()=>u.Editor.deleteFragment(t),{at:a});case"deleteContent":case"deleteContentForward":var{anchor:S}=a;if(l&&u.Range.isCollapsed(a)){var P=u.Node.leaf(t,S.path);if(S.offset<P.text.length)return v(S.path,{text:"",start:S.offset,end:S.offset+1})}return p(()=>u.Editor.deleteForward(t),{at:a});case"deleteContentBackward":var F,R,{anchor:M}=a,B=el(o)?o.isCollapsed:!!(null!==(R=o)&&void 0!==R&&R.collapsed);if(l&&B&&u.Range.isCollapsed(a)&&M.offset>0)return v(M.path,{text:"",start:M.offset-1,end:M.offset});return p(()=>u.Editor.deleteBackward(t),{at:a});case"deleteEntireSoftLine":return p(()=>{u.Editor.deleteBackward(t,{unit:"line"}),u.Editor.deleteForward(t,{unit:"line"})},{at:a});case"deleteHardLineBackward":return p(()=>u.Editor.deleteBackward(t,{unit:"block"}),{at:a});case"deleteSoftLineBackward":return p(()=>u.Editor.deleteBackward(t,{unit:"line"}),{at:a});case"deleteHardLineForward":return p(()=>u.Editor.deleteForward(t,{unit:"block"}),{at:a});case"deleteSoftLineForward":return p(()=>u.Editor.deleteForward(t,{unit:"line"}),{at:a});case"deleteWordBackward":return p(()=>u.Editor.deleteBackward(t,{unit:"word"}),{at:a});case"deleteWordForward":return p(()=>u.Editor.deleteForward(t,{unit:"word"}),{at:a});case"insertLineBreak":return p(()=>u.Editor.insertSoftBreak(t),{at:a});case"insertParagraph":return p(()=>u.Editor.insertBreak(t),{at:a});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if(eR(n))return p(()=>ek.insertData(t,n),{at:a});var N=null!=n?n:"";if($.get(t)&&(N=N.replace("\uFEFF","")),"insertText"===r&&/.*\n.*\n$/.test(N)&&(N=N.slice(0,-1)),N.includes("\n"))return p(()=>{var e=N.split("\n");e.forEach((r,a)=>{r&&u.Editor.insertText(t,r),a!==e.length-1&&u.Editor.insertSoftBreak(t)})},{at:a});if(u.Path.equals(a.anchor.path,a.focus.path)){var[L,W]=u.Range.edges(a),A={start:L.offset,end:W.offset,text:N};if(N&&d&&"insertCompositionText"===r){var j=d.start+d.text.search(/\S|$/);A.start+A.text.search(/\S|$/)===j+1&&A.end===d.start+d.text.length?(A.start-=1,d=null,b()):d=!1}else d="insertText"===r&&(null===d?A:!!(d&&u.Range.isCollapsed(a))&&d.end+d.text.length===L.offset&&eP(eP({},d),{},{text:d.text+N}));if(l){v(L.path,A);return}}return p(()=>u.Editor.insertText(t,N),{at:a})}}},handleKeyDown:e=>{E()||(g(!0),setTimeout(g))},handleDomMutations:e=>{if(!(E()||m())&&e.some(r=>eE(t,r,e))){var r;null===(r=ee.get(t))||void 0===r||r()}},handleInput:()=>{(m()||!E())&&h()}}})(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eN(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({editor:n},a)));return!function(e,t,r){var[a]=(0,d.useState)(()=>new MutationObserver(t));eM(()=>{a.takeRecords()}),(0,d.useEffect)(()=>{if(!e.current)throw Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,r),()=>a.disconnect()},[a,e,r])}(r,i.handleDomMutations,eL),Y.set(n,i.scheduleFlush),o&&i.flush(),i}:()=>null,eA=["anchor","focus"],ej=["anchor","focus"],eI=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>t.hasOwnProperty(r)&&e[r]===t[r]),eq=(e,t)=>{var r=p(e,eA),a=p(t,ej);return e[et]===t[et]&&eI(r,a)},eU=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var a=e[r],n=t[r];if(!u.Range.equals(a,n)||!eq(a,n))return!1}return!0},ez=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var a=e[r],n=t[r];if(a.anchor.offset!==n.anchor.offset||a.focus.offset!==n.focus.offset||!eq(a,n))return!1}return!0},eV=e=>{var{isLast:t,leaf:r,parent:a,text:n}=e,o=E(),i=ek.findPath(o,n),s=u.Path.parent(i),l=!0===r[er];return o.isVoid(a)?d.createElement(eK,{length:u.Node.string(a).length}):""!==r.text||a.children[a.children.length-1]!==n||o.isInline(a)||""!==u.Editor.string(o,s)?""===r.text?d.createElement(eK,{isMarkPlaceholder:l}):t&&"\n"===r.text.slice(-1)?d.createElement(e_,{isTrailing:!0,text:r.text}):d.createElement(e_,{text:r.text}):d.createElement(eK,{isLineBreak:!0,isMarkPlaceholder:l})},e_=e=>{var{text:t,isTrailing:r=!1}=e,a=(0,d.useRef)(null),n=()=>"".concat(null!=t?t:"").concat(r?"\n":""),[o]=(0,d.useState)(n);return eM(()=>{var e=n();a.current&&a.current.textContent!==e&&(a.current.textContent=e)}),d.createElement(eH,{ref:a},o)},eH=(0,d.memo)((0,d.forwardRef)((e,t)=>d.createElement("span",{"data-slate-string":!0,ref:t},e.children))),eK=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:a=!1}=e,n={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return a&&(n["data-slate-mark-placeholder"]=!0),d.createElement("span",Object.assign({},n),x&&r?null:"\uFEFF",r?d.createElement("br",null):null)};function eX(e){e.current&&(clearTimeout(e.current),e.current=null)}var eY=e=>{var{leaf:t,isLast:r,text:a,parent:n,renderPlaceholder:o,renderLeaf:i=e=>d.createElement(eJ,Object.assign({},e))}=e,s=E(),l=(0,d.useRef)(null),c=(0,d.useRef)(null),[u,h]=(0,d.useState)(!1),g=(0,d.useRef)(null),v=(0,d.useCallback)(e=>{if((r=l).current&&(r.current.disconnect(),null==e&&(r.current=null)),null==e)j.delete(s),null===(a=t.onPlaceholderResize)||void 0===a||a.call(t,null);else{if(j.set(s,e),!l.current){var r,a,n=window.ResizeObserver||f.do;l.current=new n(()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)})}l.current.observe(e),c.current=e}},[c,t,s]),p=d.createElement(eV,{isLast:r,leaf:t,parent:n,text:a}),m=t[et];if((0,d.useEffect)(()=>(m?g.current||(g.current=setTimeout(()=>{h(!0),g.current=null},300)):(eX(g),h(!1)),()=>eX(g)),[m,h]),m&&u){var w={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:y?"inherit":void 0},contentEditable:!1,ref:v}};p=d.createElement(d.Fragment,null,o(w),p)}return i({attributes:{"data-slate-leaf":!0},children:p,leaf:t,text:a})},e$=d.memo(eY,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&u.Text.equals(t.leaf,e.leaf)&&t.leaf[et]===e.leaf[et]),eJ=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r)},eZ=e=>{for(var{decorations:t,isLast:r,parent:a,renderPlaceholder:n,renderLeaf:o,text:i}=e,s=E(),l=(0,d.useRef)(null),c=u.Text.decorations(i,t),f=ek.findKey(s,i),h=[],g=0;g<c.length;g++){var v=c[g];h.push(d.createElement(e$,{isLast:r&&g===c.length-1,key:"".concat(f.id,"-").concat(g),renderPlaceholder:n,leaf:v,text:i,parent:a,renderLeaf:o}))}var p=(0,d.useCallback)(e=>{var t=z.get(s);e?(null==t||t.set(f,e),q.set(i,e),I.set(e,i)):(null==t||t.delete(f),q.delete(i),l.current&&I.delete(l.current)),l.current=e},[l,s,f,i]);return d.createElement("span",{"data-slate-node":"text",ref:p},h)},eG=d.memo(eZ,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&ez(t.decorations,e.decorations)),eQ=e=>{var{decorations:t,element:r,renderElement:a=e=>d.createElement(e1,Object.assign({},e)),renderPlaceholder:o,renderLeaf:i,selection:s}=e,l=E(),c=e5(),f=l.isInline(r),h=ek.findKey(l,r),g=(0,d.useCallback)(e=>{var t=z.get(l);e?(null==t||t.set(h,e),q.set(r,e),I.set(e,r)):(null==t||t.delete(h),q.delete(r))},[l,h,r]),v=e7({decorations:t,node:r,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:s}),p={"data-slate-node":"element",ref:g};if(f&&(p["data-slate-inline"]=!0),!f&&u.Editor.hasInlines(l,r)){var m=u.Node.string(r),w=n()(m);"rtl"===w&&(p.dir=w)}if(u.Editor.isVoid(l,r)){p["data-slate-void"]=!0,!c&&f&&(p.contentEditable=!1);var[[b]]=u.Node.texts(r);v=d.createElement(f?"span":"div",{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},d.createElement(eG,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:b})),N.set(b,0),L.set(b,r)}return a({attributes:p,children:v,element:r})},e0=d.memo(eQ,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&eU(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&u.Range.equals(e.selection,t.selection))),e1=e=>{var{attributes:t,children:r,element:a}=e,n=E().isInline(a)?"span":"div";return d.createElement(n,Object.assign({},t,{style:{position:"relative"}}),r)},e2=(0,d.createContext)(()=>[]),e3=()=>(0,d.useContext)(e2),e9=(0,d.createContext)(!1),e7=e=>{for(var{decorations:t,node:r,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:i}=e,s=e3(),l=E(),c=ek.findPath(l,r),f=[],h=u.Element.isElement(r)&&!l.isInline(r)&&u.Editor.hasInlines(l,r),g=0;g<r.children.length;g++){var v=c.concat(g),p=r.children[g],m=ek.findKey(l,p),w=u.Editor.range(l,v),b=i&&u.Range.intersection(w,i),k=s([p,v]);for(var x of t){var C=u.Range.intersection(x,w);C&&k.push(C)}u.Element.isElement(p)?f.push(d.createElement(e9.Provider,{key:"provider-".concat(m.id),value:!!b},d.createElement(e0,{decorations:k,element:p,key:m.id,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:b}))):f.push(d.createElement(eG,{decorations:k,key:m.id,isLast:h&&g===r.children.length-1,parent:r,renderPlaceholder:n,renderLeaf:o,text:p})),N.set(p,g),L.set(p,r)}return f},e6=(0,d.createContext)(!1),e5=()=>(0,d.useContext)(e6),e4=(0,d.createContext)(null),e8=()=>{var e=(0,d.useContext)(e4);if(!e)throw Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t},te={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},tt={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},tr={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},ta=e=>{var t=te[e],r=tt[e],a=tr[e],n=t&&(0,h.P6)(t),o=r&&(0,h.P6)(r),i=a&&(0,h.P6)(a);return e=>!!(n&&n(e)||k&&o&&o(e)||!k&&i&&i(e))},tn={isBold:ta("bold"),isCompose:ta("compose"),isMoveBackward:ta("moveBackward"),isMoveForward:ta("moveForward"),isDeleteBackward:ta("deleteBackward"),isDeleteForward:ta("deleteForward"),isDeleteLineBackward:ta("deleteLineBackward"),isDeleteLineForward:ta("deleteLineForward"),isDeleteWordBackward:ta("deleteWordBackward"),isDeleteWordForward:ta("deleteWordForward"),isExtendBackward:ta("extendBackward"),isExtendForward:ta("extendForward"),isExtendLineBackward:ta("extendLineBackward"),isExtendLineForward:ta("extendLineForward"),isItalic:ta("italic"),isMoveLineBackward:ta("moveLineBackward"),isMoveLineForward:ta("moveLineForward"),isMoveWordBackward:ta("moveWordBackward"),isMoveWordForward:ta("moveWordForward"),isRedo:ta("redo"),isSoftBreak:ta("insertSoftBreak"),isSplitBlock:ta("splitBlock"),isTransposeCharacter:ta("transposeCharacter"),isUndo:ta("undo")},to=(e,t)=>{var r=[],a=()=>{r=[]};return{registerMutations:a=>{if(t.current){var n=a.filter(t=>eE(e,t,a));r.push(...n)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach(e=>{"characterData"!==e.type&&(e.removedNodes.forEach(t=>{e.target.insertBefore(t,e.nextSibling)}),e.addedNodes.forEach(t=>{e.target.removeChild(t)}))}),a())},clear:a}},ti={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class ts extends d.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:t}=this.props;if(!t.current)throw Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,ti)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=to(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,a,n=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();return null!=n&&n.length&&(null===(a=this.manager)||void 0===a||a.registerMutations(n)),null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}ts.contextType=m;var tl=x?ts:e=>{var{children:t}=e;return d.createElement(d.Fragment,null,t)},td=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],tc=["text"];function tu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function tf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tu(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var th=e=>d.createElement(d.Fragment,null,e7(e)),tg=e=>{var t,r,a,o,s=(0,d.useCallback)(e=>d.createElement(tv,Object.assign({},e)),[]),{autoFocus:c,decorate:f=tp,onDOMBeforeInput:h,placeholder:g,readOnly:v=!1,renderElement:m,renderLeaf:w,renderPlaceholder:k=s,scrollSelectionIntoView:D=tm,style:T={},as:S="div",disableDefaultStyles:N=!1}=e,L=p(e,td),j=e8(),[U,z]=(0,d.useState)(!1),X=(0,d.useRef)(null),Y=(0,d.useRef)([]),[Z,G]=(0,d.useState)(),{onUserInput:Q,receivedUserInput:ea}=(t=E(),r=(0,d.useRef)(!1),a=(0,d.useRef)(0),o=(0,d.useCallback)(()=>{if(!r.current){r.current=!0;var e=ek.getWindow(t);e.cancelAnimationFrame(a.current),a.current=e.requestAnimationFrame(()=>{r.current=!1})}},[t]),(0,d.useEffect)(()=>()=>cancelAnimationFrame(a.current),[]),{receivedUserInput:r,onUserInput:o}),[,eo]=(0,d.useReducer)(e=>e+1,0);ee.set(j,eo),V.set(j,v);var el=(0,d.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,d.useEffect)(()=>{X.current&&c&&X.current.focus()},[c]);var ed=(0,d.useRef)(),eu=(0,d.useMemo)(()=>l()(()=>{var e=ed.current;if((x||!ek.isComposing(j))&&(!el.isUpdatingSelection||null!=e&&e.isFlushing())&&!el.isDraggingInternally){var t=ek.findDocumentOrShadowRoot(j),{activeElement:r}=t,a=ek.toDOMNode(j,j),n=t.getSelection();if(r===a?(el.latestElement=r,_.set(j,!0)):_.delete(j),!n)return u.Transforms.deselect(j);var{anchorNode:o,focusNode:i}=n,s=ek.hasEditableTarget(j,o)||ek.isTargetInsideNonReadonlyVoid(j,o),l=ek.hasEditableTarget(j,i)||ek.isTargetInsideNonReadonlyVoid(j,i);if(s&&l){var d=ek.toSlateRange(j,n,{exactMatch:!1,suppressThrow:!0});d&&(ek.isComposing(j)||null!=e&&e.hasPendingChanges()||null!=e&&e.isFlushing()?null==e||e.handleUserSelect(d):u.Transforms.select(j,d))}!v||s&&l||u.Transforms.deselect(j)}},100),[j,v,el]),ef=(0,d.useMemo)(()=>i()(eu,0),[eu]);ed.current=eW({node:X,onDOMSelectionChange:eu,scheduleOnDOMSelectionChange:ef}),eM(()=>{X.current&&(r=en(X.current))?(W.set(j,r),A.set(j,X.current),q.set(j,X.current),I.set(X.current,j)):q.delete(j);var e,t,r,{selection:a}=j,n=ek.findDocumentOrShadowRoot(j).getSelection();if(!(!n||!ek.isFocused(j)||null!==(e=ed.current)&&void 0!==e&&e.hasPendingAction())){var o=e=>{var t="None"!==n.type;if(a||t){var r=n.focusNode;if(C&&n.rangeCount>1){var o=n.getRangeAt(0),i=n.getRangeAt(n.rangeCount-1);d=o.startContainer===r?i.endContainer:o.startContainer}else d=n.anchorNode;var s=A.get(j),l=!1;if(s.contains(d)&&s.contains(r)&&(l=!0),t&&l&&a&&!e){var d,c,f,h=ek.toSlateRange(j,n,{exactMatch:!0,suppressThrow:!0});if(h&&u.Range.equals(h,a)&&(!el.hasMarkPlaceholder||null!==(c=d)&&void 0!==c&&null!==(f=c.parentElement)&&void 0!==f&&f.hasAttribute("data-slate-mark-placeholder")))return}if(a&&!ek.hasRange(j,a)){j.selection=ek.toSlateRange(j,n,{exactMatch:!1,suppressThrow:!0});return}el.isUpdatingSelection=!0;var g=a&&ek.toDOMRange(j,a);return g?(ek.isComposing(j)&&!x?n.collapseToEnd():u.Range.isBackward(a)?n.setBaseAndExtent(g.endContainer,g.endOffset,g.startContainer,g.startOffset):n.setBaseAndExtent(g.startContainer,g.startOffset,g.endContainer,g.endOffset),D(j,g)):n.removeAllRanges(),g}};n.rangeCount<=1&&o();var i=(null===(t=ed.current)||void 0===t?void 0:t.isFlushing())==="action";if(!x||!i){setTimeout(()=>{el.isUpdatingSelection=!1});return}var s=null,l=requestAnimationFrame(()=>{if(i){var e=e=>{try{ek.toDOMNode(j,j).focus(),o(e)}catch(e){}};e(),s=setTimeout(()=>{e(!0),el.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(l),s&&clearTimeout(s)}}});var eh=(0,d.useCallback)(e=>{if(Q(),!v&&ek.hasEditableTarget(j,e.target)&&!tb(e,h)){if(ed.current)return ed.current.handleDOMBeforeInput(e);ef.flush(),eu.flush();var{selection:t}=j,{inputType:r}=e,a=e.dataTransfer||e.data||void 0,n="insertCompositionText"===r||"deleteCompositionText"===r;if(!(n&&ek.isComposing(j))){var o=!1;if("insertText"===r&&t&&u.Range.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset){o=!0,j.marks&&(o=!1);var{anchor:i}=t,[s,l]=ek.toDOMPoint(j,i),d=null===(g=s.parentElement)||void 0===g?void 0:g.closest("a"),c=ek.getWindow(j);if(o&&d&&ek.hasDOMNode(j,d)){var f,g,p,m,E=null==c?void 0:c.document.createTreeWalker(d,NodeFilter.SHOW_TEXT).lastChild();E===s&&(null===(m=E.textContent)||void 0===m?void 0:m.length)===l&&(o=!1)}if(o&&s.parentElement&&(null==c?void 0:null===(p=c.getComputedStyle(s.parentElement))||void 0===p?void 0:p.whiteSpace)==="pre"){var w=u.Editor.above(j,{at:i.path,match:e=>u.Element.isElement(e)&&u.Editor.isBlock(j,e)});w&&u.Node.string(w[0]).includes("	")&&(o=!1)}}if(!r.startsWith("delete")||r.startsWith("deleteBy")){var[b]=e.getTargetRanges();if(b){var k=ek.toSlateRange(j,b,{exactMatch:!1,suppressThrow:!1});if(!t||!u.Range.equals(t,k)){o=!1;var x=!n&&j.selection&&u.Editor.rangeRef(j,j.selection);u.Transforms.select(j,k),x&&K.set(j,x)}}}if(!n){if(o||e.preventDefault(),t&&u.Range.isExpanded(t)&&r.startsWith("delete")){var C=r.endsWith("Backward")?"backward":"forward";u.Editor.deleteFragment(j,{direction:C});return}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":u.Editor.deleteFragment(j);break;case"deleteContent":case"deleteContentForward":u.Editor.deleteForward(j);break;case"deleteContentBackward":u.Editor.deleteBackward(j);break;case"deleteEntireSoftLine":u.Editor.deleteBackward(j,{unit:"line"}),u.Editor.deleteForward(j,{unit:"line"});break;case"deleteHardLineBackward":u.Editor.deleteBackward(j,{unit:"block"});break;case"deleteSoftLineBackward":u.Editor.deleteBackward(j,{unit:"line"});break;case"deleteHardLineForward":u.Editor.deleteForward(j,{unit:"block"});break;case"deleteSoftLineForward":u.Editor.deleteForward(j,{unit:"line"});break;case"deleteWordBackward":u.Editor.deleteBackward(j,{unit:"word"});break;case"deleteWordForward":u.Editor.deleteForward(j,{unit:"word"});break;case"insertLineBreak":u.Editor.insertSoftBreak(j);break;case"insertParagraph":u.Editor.insertBreak(j);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&ek.isComposing(j)&&(z(!1),H.set(j,!1)),(null==a?void 0:a.constructor.name)==="DataTransfer"?ek.insertData(j,a):"string"==typeof a&&(o?Y.current.push(()=>u.Editor.insertText(j,a)):u.Editor.insertText(j,a))}var y=null===(f=K.get(j))||void 0===f?void 0:f.unref();K.delete(j),!y||j.selection&&u.Range.equals(j.selection,y)||u.Transforms.select(j,y)}}}},[j,eu,Q,h,v,ef]),eg=(0,d.useCallback)(e=>{null==e?(eu.cancel(),ef.cancel(),A.delete(j),q.delete(j),X.current&&B&&X.current.removeEventListener("beforeinput",eh)):B&&e.addEventListener("beforeinput",eh),X.current=e},[eu,ef,j,eh]);eM(()=>{var e=ek.getWindow(j);return e.document.addEventListener("selectionchange",ef),()=>{e.document.removeEventListener("selectionchange",ef)}},[ef]);var ev=f([j,[]]),ep=g&&1===j.children.length&&1===Array.from(u.Node.texts(j)).length&&""===u.Node.string(j)&&!U,em=(0,d.useCallback)(e=>{if(e&&ep){var t;G(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height)}else G(void 0)},[ep]);if(ep){var eE=u.Editor.start(j,[]);ev.push({[et]:!0,placeholder:g,onPlaceholderResize:em,anchor:eE,focus:eE})}var{marks:ew}=j;if(el.hasMarkPlaceholder=!1,j.selection&&u.Range.isCollapsed(j.selection)&&ew){var{anchor:eb}=j.selection,ex=u.Node.leaf(j,eb.path),eC=p(ex,tc);if(!u.Text.equals(ex,ew,{loose:!0})){el.hasMarkPlaceholder=!0;var ey=Object.fromEntries(Object.keys(eC).map(e=>[e,null]));ev.push(tf(tf(tf({[er]:!0},ey),ew),{},{anchor:eb,focus:eb}))}}return(0,d.useEffect)(()=>{setTimeout(()=>{var{selection:e}=j;if(e){var{anchor:t}=e,r=u.Node.leaf(j,t.path);if(ew&&!u.Text.equals(r,ew,{loose:!0})){$.set(j,ew);return}}$.delete(j)})}),d.createElement(e6.Provider,{value:v},d.createElement(e2.Provider,{value:f},d.createElement(tl,{node:X,receivedUserInput:ea},d.createElement(S,Object.assign({role:v?void 0:"textbox","aria-multiline":!v||void 0},L,{spellCheck:(!!B||!M)&&L.spellCheck,autoCorrect:B||!M?L.autoCorrect:"false",autoCapitalize:B||!M?L.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!v,zindex:-1,suppressContentEditableWarning:!0,ref:eg,style:tf(tf({},N?{}:tf({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},Z?{minHeight:Z}:{})),T),onBeforeInput:(0,d.useCallback)(e=>{if(!B&&!v&&!tE(e,L.onBeforeInput)&&ek.hasSelectableTarget(j,e.target)&&(e.preventDefault(),!ek.isComposing(j))){var t=e.data;u.Editor.insertText(j,t)}},[L.onBeforeInput,j,v]),onInput:(0,d.useCallback)(e=>{if(!tE(e,L.onInput)){if(ed.current){ed.current.handleInput();return}for(var t of Y.current)t();Y.current=[]}},[L.onInput]),onBlur:(0,d.useCallback)(e=>{if(!(v||el.isUpdatingSelection||!ek.hasSelectableTarget(j,e.target)||tE(e,L.onBlur))){var t=ek.findDocumentOrShadowRoot(j);if(el.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===ek.toDOMNode(j,j)||ei(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&es(r)&&ek.hasDOMNode(j,r)){var a=ek.toSlateNode(j,r);if(u.Element.isElement(a)&&!j.isVoid(a))return}if(y){var n=t.getSelection();null==n||n.removeAllRanges()}_.delete(j)}}}},[v,el.isUpdatingSelection,el.latestElement,j,L.onBlur]),onClick:(0,d.useCallback)(e=>{if(ek.hasTarget(j,e.target)&&!tE(e,L.onClick)&&es(e.target)){var t=ek.toSlateNode(j,e.target),r=ek.findPath(j,t);if(u.Editor.hasPath(j,r)&&u.Node.get(j,r)===t){if(3===e.detail&&r.length>=1){var a=r;if(!(u.Element.isElement(t)&&u.Editor.isBlock(j,t))){var n,o=u.Editor.above(j,{match:e=>u.Element.isElement(e)&&u.Editor.isBlock(j,e),at:r});a=null!==(n=null==o?void 0:o[1])&&void 0!==n?n:r.slice(0,1)}var i=u.Editor.range(j,a);u.Transforms.select(j,i);return}if(!v){var s=u.Editor.start(j,r),l=u.Editor.end(j,r),d=u.Editor.void(j,{at:s}),c=u.Editor.void(j,{at:l});if(d&&c&&u.Path.equals(d[1],c[1])){var f=u.Editor.range(j,s);u.Transforms.select(j,f)}}}}},[j,L.onClick,v]),onCompositionEnd:(0,d.useCallback)(e=>{if(ek.hasSelectableTarget(j,e.target)){var t;if(ek.isComposing(j)&&(z(!1),H.set(j,!1)),null===(t=ed.current)||void 0===t||t.handleCompositionEnd(e),!tE(e,L.onCompositionEnd)&&!x&&!y&&!P&&!b&&!R&&!F&&e.data){var r=$.get(j);$.delete(j),void 0!==r&&(J.set(j,j.marks),j.marks=r),u.Editor.insertText(j,e.data);var a=J.get(j);J.delete(j),void 0!==a&&(j.marks=a)}}},[L.onCompositionEnd,j]),onCompositionUpdate:(0,d.useCallback)(e=>{!ek.hasSelectableTarget(j,e.target)||tE(e,L.onCompositionUpdate)||ek.isComposing(j)||(z(!0),H.set(j,!0))},[L.onCompositionUpdate,j]),onCompositionStart:(0,d.useCallback)(e=>{if(ek.hasSelectableTarget(j,e.target)&&(null===(t=ed.current)||void 0===t||t.handleCompositionStart(e),!tE(e,L.onCompositionStart)&&!x)){z(!0);var t,{selection:r}=j;if(r){if(u.Range.isExpanded(r)){u.Editor.deleteFragment(j);return}var a=u.Editor.above(j,{match:e=>u.Element.isElement(e)&&u.Editor.isInline(j,e),mode:"highest"});if(a){var[,n]=a;if(u.Editor.isEnd(j,r.anchor,n)){var o=u.Editor.after(j,n);u.Transforms.setSelection(j,{anchor:o,focus:o})}}}}},[L.onCompositionStart,j]),onCopy:(0,d.useCallback)(e=>{!ek.hasSelectableTarget(j,e.target)||tE(e,L.onCopy)||tw(e)||(e.preventDefault(),ek.setFragmentData(j,e.clipboardData,"copy"))},[L.onCopy,j]),onCut:(0,d.useCallback)(e=>{if(!v&&ek.hasSelectableTarget(j,e.target)&&!tE(e,L.onCut)&&!tw(e)){e.preventDefault(),ek.setFragmentData(j,e.clipboardData,"cut");var{selection:t}=j;if(t){if(u.Range.isExpanded(t))u.Editor.deleteFragment(j);else{var r=u.Node.parent(j,t.anchor.path);u.Editor.isVoid(j,r)&&u.Transforms.delete(j)}}}},[v,j,L.onCut]),onDragOver:(0,d.useCallback)(e=>{if(ek.hasTarget(j,e.target)&&!tE(e,L.onDragOver)){var t=ek.toSlateNode(j,e.target);u.Element.isElement(t)&&u.Editor.isVoid(j,t)&&e.preventDefault()}},[L.onDragOver,j]),onDragStart:(0,d.useCallback)(e=>{if(!v&&ek.hasTarget(j,e.target)&&!tE(e,L.onDragStart)){var t=ek.toSlateNode(j,e.target),r=ek.findPath(j,t);if(u.Element.isElement(t)&&u.Editor.isVoid(j,t)||u.Editor.void(j,{at:r,voids:!0})){var a=u.Editor.range(j,r);u.Transforms.select(j,a)}el.isDraggingInternally=!0,ek.setFragmentData(j,e.dataTransfer,"drag")}},[v,j,L.onDragStart,el]),onDrop:(0,d.useCallback)(e=>{if(!v&&ek.hasTarget(j,e.target)&&!tE(e,L.onDrop)){e.preventDefault();var t=j.selection,r=ek.findEventRange(j,e),a=e.dataTransfer;u.Transforms.select(j,r),el.isDraggingInternally&&t&&!u.Range.equals(t,r)&&!u.Editor.void(j,{at:r,voids:!0})&&u.Transforms.delete(j,{at:t}),ek.insertData(j,a),ek.isFocused(j)||ek.focus(j)}el.isDraggingInternally=!1},[v,j,L.onDrop,el]),onDragEnd:(0,d.useCallback)(e=>{!v&&el.isDraggingInternally&&L.onDragEnd&&ek.hasTarget(j,e.target)&&L.onDragEnd(e),el.isDraggingInternally=!1},[v,el,L,j]),onFocus:(0,d.useCallback)(e=>{if(!v&&!el.isUpdatingSelection&&ek.hasEditableTarget(j,e.target)&&!tE(e,L.onFocus)){var t=ek.toDOMNode(j,j),r=ek.findDocumentOrShadowRoot(j);if(el.latestElement=r.activeElement,C&&e.target!==t){t.focus();return}_.set(j,!0)}},[v,el,j,L.onFocus]),onKeyDown:(0,d.useCallback)(e=>{if(!v&&ek.hasEditableTarget(j,e.target)){null===(t=ed.current)||void 0===t||t.handleKeyDown(e);var t,{nativeEvent:r}=e;if(ek.isComposing(j)&&!1===r.isComposing&&(H.set(j,!1),z(!1)),!(tE(e,L.onKeyDown)||ek.isComposing(j))){var{selection:a}=j,o=j.children[null!==a?a.focus.path[0]:0],i="rtl"===n()(u.Node.string(o));if(tn.isRedo(r)){e.preventDefault(),"function"==typeof j.redo&&j.redo();return}if(tn.isUndo(r)){e.preventDefault(),"function"==typeof j.undo&&j.undo();return}if(tn.isMoveLineBackward(r)){e.preventDefault(),u.Transforms.move(j,{unit:"line",reverse:!0});return}if(tn.isMoveLineForward(r)){e.preventDefault(),u.Transforms.move(j,{unit:"line"});return}if(tn.isExtendLineBackward(r)){e.preventDefault(),u.Transforms.move(j,{unit:"line",edge:"focus",reverse:!0});return}if(tn.isExtendLineForward(r)){e.preventDefault(),u.Transforms.move(j,{unit:"line",edge:"focus"});return}if(tn.isMoveBackward(r)){e.preventDefault(),a&&u.Range.isCollapsed(a)?u.Transforms.move(j,{reverse:!i}):u.Transforms.collapse(j,{edge:"start"});return}if(tn.isMoveForward(r)){e.preventDefault(),a&&u.Range.isCollapsed(a)?u.Transforms.move(j,{reverse:i}):u.Transforms.collapse(j,{edge:"end"});return}if(tn.isMoveWordBackward(r)){e.preventDefault(),a&&u.Range.isExpanded(a)&&u.Transforms.collapse(j,{edge:"focus"}),u.Transforms.move(j,{unit:"word",reverse:!i});return}if(tn.isMoveWordForward(r)){e.preventDefault(),a&&u.Range.isExpanded(a)&&u.Transforms.collapse(j,{edge:"focus"}),u.Transforms.move(j,{unit:"word",reverse:i});return}if(B){if((O||y)&&a&&(tn.isDeleteBackward(r)||tn.isDeleteForward(r))&&u.Range.isCollapsed(a)){var s=u.Node.parent(j,a.anchor.path);if(u.Element.isElement(s)&&u.Editor.isVoid(j,s)&&(u.Editor.isInline(j,s)||u.Editor.isBlock(j,s))){e.preventDefault(),u.Editor.deleteBackward(j,{unit:"block"});return}}}else{if(tn.isBold(r)||tn.isItalic(r)||tn.isTransposeCharacter(r)){e.preventDefault();return}if(tn.isSoftBreak(r)){e.preventDefault(),u.Editor.insertSoftBreak(j);return}if(tn.isSplitBlock(r)){e.preventDefault(),u.Editor.insertBreak(j);return}if(tn.isDeleteBackward(r)){e.preventDefault(),a&&u.Range.isExpanded(a)?u.Editor.deleteFragment(j,{direction:"backward"}):u.Editor.deleteBackward(j);return}if(tn.isDeleteForward(r)){e.preventDefault(),a&&u.Range.isExpanded(a)?u.Editor.deleteFragment(j,{direction:"forward"}):u.Editor.deleteForward(j);return}if(tn.isDeleteLineBackward(r)){e.preventDefault(),a&&u.Range.isExpanded(a)?u.Editor.deleteFragment(j,{direction:"backward"}):u.Editor.deleteBackward(j,{unit:"line"});return}if(tn.isDeleteLineForward(r)){e.preventDefault(),a&&u.Range.isExpanded(a)?u.Editor.deleteFragment(j,{direction:"forward"}):u.Editor.deleteForward(j,{unit:"line"});return}if(tn.isDeleteWordBackward(r)){e.preventDefault(),a&&u.Range.isExpanded(a)?u.Editor.deleteFragment(j,{direction:"backward"}):u.Editor.deleteBackward(j,{unit:"word"});return}if(tn.isDeleteWordForward(r)){e.preventDefault(),a&&u.Range.isExpanded(a)?u.Editor.deleteFragment(j,{direction:"forward"}):u.Editor.deleteForward(j,{unit:"word"});return}}}}},[v,j,L.onKeyDown]),onPaste:(0,d.useCallback)(e=>{!v&&ek.hasEditableTarget(j,e.target)&&!tE(e,L.onPaste)&&(!B||ec(e.nativeEvent)||y)&&(e.preventDefault(),ek.insertData(j,e.clipboardData))},[v,j,L.onPaste])}),d.createElement(th,{decorations:ev,node:j,renderElement:m,renderPlaceholder:k,renderLeaf:w,selection:j.selection})))))},tv=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r,x&&d.createElement("br",null))},tp=()=>[],tm=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&u.Range.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,c.Z)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},tE=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},tw=e=>es(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),tb=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},tk=(0,d.createContext)(!1),tx=(0,d.createContext)({}),tC=["editor","children","onChange","initialValue"],ty=e=>{var t,r,a,{editor:n,children:o,onChange:i,initialValue:s}=e,l=p(e,tC),[c,f]=d.useState(()=>{if(!u.Node.isNodeList(s))throw Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(u.Scrubber.stringify(s)));if(!u.Editor.isEditor(n))throw Error("[Slate] editor is invalid! You passed: ".concat(u.Scrubber.stringify(n)));return n.children=s,Object.assign(n,l),{v:0,editor:n}}),{selectorContext:h,onChange:g}=(t=(0,d.useRef)([]).current,r=(0,d.useRef)({editor:n}).current,a=(0,d.useCallback)(e=>{r.editor=e,t.forEach(t=>t(e))},[t,r]),{selectorContext:(0,d.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})}),[t,r]),onChange:a}),v=(0,d.useCallback)(()=>{i&&i(n.children),f(e=>({v:e.v+1,editor:n})),g(n)},[n,g,i]);(0,d.useEffect)(()=>(X.set(n,v),()=>{X.set(n,()=>{})}),[n,v]);var[E,b]=(0,d.useState)(ek.isFocused(n));return(0,d.useEffect)(()=>{b(ek.isFocused(n))},[n]),eM(()=>{var e=()=>b(ek.isFocused(n));return w>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})},[]),d.createElement(tx.Provider,{value:h},d.createElement(e4.Provider,{value:c},d.createElement(m.Provider,{value:c.editor},d.createElement(tk.Provider,{value:E},o))))},tD=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},tO=(e,t,r)=>{var a=ek.toDOMRange(e,t).getBoundingClientRect(),n=ek.toDOMRange(e,r).getBoundingClientRect();return tD(a,n)&&tD(n,a)},tT=(e,t)=>{var r=u.Editor.range(e,u.Range.end(t)),a=Array.from(u.Editor.positions(e,{at:t})),n=0,o=a.length,i=Math.floor(o/2);if(tO(e,u.Editor.range(e,a[n]),r))return u.Editor.range(e,a[n],r);if(a.length<2)return u.Editor.range(e,a[a.length-1],r);for(;i!==a.length&&i!==n;)tO(e,u.Editor.range(e,a[i]),r)?o=i:n=i,i=Math.floor((n+o)/2);return u.Editor.range(e,a[o],r)};function tS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function tP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tS(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tF=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=e,{apply:a,onChange:n,deleteBackward:o,addMark:i,removeMark:s}=r;return z.set(r,new WeakMap),r.addMark=(e,t)=>{var a,n;null===(a=Y.get(r))||void 0===a||a(),!$.get(r)&&null!==(n=Z.get(r))&&void 0!==n&&n.length&&$.set(r,null),J.delete(r),i(e,t)},r.removeMark=e=>{var t;!$.get(r)&&null!==(t=Z.get(r))&&void 0!==t&&t.length&&$.set(r,null),J.delete(r),s(e)},r.deleteBackward=e=>{if("line"!==e)return o(e);if(r.selection&&u.Range.isCollapsed(r.selection)){var t=u.Editor.above(r,{match:e=>u.Element.isElement(e)&&u.Editor.isBlock(r,e),at:r.selection});if(t){var[,a]=t,n=u.Editor.range(r,a,r.selection.anchor),i=tT(r,n);u.Range.isCollapsed(i)||u.Transforms.delete(r,{at:i})}}},r.apply=e=>{var t,n=[],o=Z.get(r);if(null!=o&&o.length){var i=o.map(t=>(function(e,t){var{path:r,diff:a,id:n}=e;switch(t.type){case"insert_text":if(!u.Path.equals(t.path,r)||t.offset>=a.end)return e;if(t.offset<=a.start)return{diff:{start:t.text.length+a.start,end:t.text.length+a.end,text:a.text},id:n,path:r};return{diff:{start:a.start,end:a.end+t.text.length,text:a.text},id:n,path:r};case"remove_text":if(!u.Path.equals(t.path,r)||t.offset>=a.end)return e;if(t.offset+t.text.length<=a.start)return{diff:{start:a.start-t.text.length,end:a.end-t.text.length,text:a.text},id:n,path:r};return{diff:{start:a.start,end:a.end-t.text.length,text:a.text},id:n,path:r};case"split_node":if(!u.Path.equals(t.path,r)||t.position>=a.end)return{diff:a,id:n,path:u.Path.transform(r,t,{affinity:"backward"})};if(t.position>a.start)return{diff:{start:a.start,end:Math.min(t.position,a.end),text:a.text},id:n,path:r};return{diff:{start:a.start-t.position,end:a.end-t.position,text:a.text},id:n,path:u.Path.transform(r,t,{affinity:"forward"})};case"merge_node":if(!u.Path.equals(t.path,r))return{diff:a,id:n,path:u.Path.transform(r,t)};return{diff:{start:a.start+t.position,end:a.end+t.position,text:a.text},id:n,path:u.Path.transform(r,t)}}var o=u.Path.transform(r,t);return o?{diff:a,path:o,id:n}:null})(t,e)).filter(Boolean);Z.set(r,i)}var s=Q.get(r);s&&Q.set(r,eT(r,s,e));var l=G.get(r);if(null!=l&&l.at){var d=u.Point.isPoint(null==l?void 0:l.at)?eO(r,l.at,e):eT(r,l.at,e);G.set(r,d?tP(tP({},l),{},{at:d}):null)}switch(e.type){case"insert_text":case"remove_text":case"set_node":case"split_node":n.push(...tR(r,e.path));break;case"set_selection":null===(t=K.get(r))||void 0===t||t.unref(),K.delete(r);break;case"insert_node":case"remove_node":n.push(...tR(r,u.Path.parent(e.path)));break;case"merge_node":n.push(...tR(r,u.Path.previous(e.path)));break;case"move_node":n.push(...tR(r,u.Path.common(u.Path.parent(e.path),u.Path.parent(e.newPath))))}for(var[c,f]of(a(e),n)){var[h]=u.Editor.node(r,c);U.set(h,f)}},r.setFragmentData=e=>{var{selection:a}=r;if(a){var[n,o]=u.Range.edges(a),i=u.Editor.void(r,{at:n.path}),s=u.Editor.void(r,{at:o.path});if(!u.Range.isCollapsed(a)||i){var l=ek.toDOMRange(r,a),d=l.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)}),s){var[f]=s,h=l.cloneRange(),g=ek.toDOMNode(r,f);h.setEndAfter(g),d=h.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),ed(c)){var v=c.ownerDocument.createElement("span");v.style.whiteSpace="pre",v.appendChild(c),d.appendChild(v),c=v}var p=JSON.stringify(r.getFragment()),m=window.btoa(encodeURIComponent(p));c.setAttribute("data-slate-fragment",m),e.setData("application/".concat(t),m);var E=d.ownerDocument.createElement("div");return E.appendChild(d),E.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(E),e.setData("text/html",E.innerHTML),e.setData("text/plain",ev(E)),d.ownerDocument.body.removeChild(E),e}}},r.insertData=e=>{r.insertFragmentData(e)||r.insertTextData(e)},r.insertFragmentData=e=>{var a=e.getData("application/".concat(t))||em(e);if(a){var n=JSON.parse(decodeURIComponent(window.atob(a)));return r.insertFragment(n),!0}return!1},r.insertTextData=e=>{var t=e.getData("text/plain");if(t){var a=t.split(/\r\n|\r|\n/),n=!1;for(var o of a)n&&u.Transforms.splitNodes(r,{always:!0}),r.insertText(o),n=!0;return!0}return!1},r.onChange=e=>{(w<18?g.unstable_batchedUpdates:e=>e())(()=>{var t=X.get(r);t&&t(),n(e)})},r},tR=(e,t)=>{var r=[];for(var[a,n]of u.Editor.levels(e,{at:t})){var o=ek.findKey(e,a);r.push([n,o])}return r}}}]);