{"version":3,"sources":["../src/reportdashboard.js"],"names":["define","Ajax","report","reportwidget","schedule","helper","ajax","select2","DataTable","RadiosToSlider","flatpickr","Str","$","init","document","ajaxStop","fadeOut","Select2Ajax","change","courseid","val","DashboardTiles","DashboardWidgets","each","attr","submit","event","dashboardname","name","trim","css","preventDefault","spaceexist","indexOf","ui","dialog","prototype","_focusTabbable","noop","DheaderPosition","position","offset","top","action","multiple","on","parents","trigger","activityelement","find","instancelement","reportid","data","reporttype","instanceid","userelement","smartfilter","CourseActivities","element","reset","CreateDashboardwidget","categoryid","value","courseelement","closest","length","categoryCourses","size","animation","reportdashboard","mode","onOpen","selectedDates","dateStr","instance","clear","onClose","getTime","require","window","onclick","target","matches","dropdowns","getElementsByClassName","i","openDropdown","hasClass","toggleClass","addblocks_to_dashboard","get_string","then","html","console","log","urlParam","results","RegExp","exec","location","href","role","dashboardurl","contextlevel","promise","call","methodname","args","done","response","widget_title_img","M","util","image_url","title","modal","minWidth","maxHeight","removeClass","resp","JSON","parse","fail","addtiles_to_dashboard","tile_title_img","addnewdashboard","s","getElementById","Closebutton","parent","updatedashboard","oldname","newname","senddata","stringify","url","cfg","wwwroot","sendreportemail","get_strings","key","component","nodeContent","AjaxForms","reportfilter","self","append","reportFilterFormModal","hide","title_img","dialogClass","resizable","autoOpen","draggable","width","height","appendTo","my","at","of","within","open","click","e","stopImmediatePropagation","serializeArray","container","removeAttr","DeleteWidget","Deletedashboard","random","close","schreportform"],"mappings":"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","sourcesContent":["define(['core/ajax',\r\n        'block_learnerscript/report',\r\n        'block_learnerscript/reportwidget',\r\n        'block_learnerscript/schedule',\r\n        'block_learnerscript/helper',\r\n        'block_learnerscript/ajax',\r\n        'block_learnerscript/select2',\r\n        'block_learnerscript/jquery.dataTables',\r\n        'block_learnerscript/radioslider',\r\n        'block_learnerscript/flatpickr',\r\n        'core/str',\r\n        'jquery',\r\n        'jqueryui',\r\n        'block_learnerscript/bootstrapnotify',\r\n        'block_reportdashboard/inplace_editable'\r\n    ],\r\n    function(Ajax, report, reportwidget, schedule, helper, ajax, select2, DataTable,RadiosToSlider,flatpickr, Str, $) {\r\n        return {\r\n            init: function() {\r\n                    $(document).ajaxStop(function() {\r\n                         $(\".loader\").fadeOut(\"slow\");\r\n                    });\r\n                    helper.Select2Ajax({});\r\n                    $(\".dashboardcourses\").change(function(){\r\n                        var courseid = $(this).val();\r\n                        $(\".report_courses\").val(courseid);\r\n                        reportwidget.DashboardTiles();\r\n                        reportwidget.DashboardWidgets();\r\n                        $(\".viewmore\").each(function(){\r\n                            var ahref = $(this).attr('href');\r\n                        });\r\n                        //$('.breadcrumb-button.pull-xs-right').html($(this).find('option:selected').text());\r\n                    });\r\n\r\n                    $( \"#createdashbaord_form\" ).submit(function( event ) {\r\n                        var dashboardname = $( \"#id_dashboard\" ).val();\r\n                        var name = dashboardname.trim();\r\n                        if(name == '' || name == null){\r\n                            $( \"#id_error_dashboard\" ).css('display', 'block');\r\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'none');\r\n                            event.preventDefault();\r\n                        }\r\n                        spaceexist = name.indexOf(\" \");\r\n                        if(spaceexist > 0 && spaceexist != ''){\r\n                            $( \"#id_error_dashboard\" ).css('display', 'none');\r\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'block');\r\n                            event.preventDefault();\r\n                        }\r\n                    });\r\n\r\n                $.ui.dialog.prototype._focusTabbable = $.noop;\r\n                var DheaderPosition = $(\"#dashboard-header\").position();\r\n                $(\".sidenav\").offset({top: 0});\r\n                $(\"#internalbsm\").offset({top: DheaderPosition.top});\r\n                /**\r\n                * Select2 Options\r\n                */\r\n                $(\"select[data-select2='1']\").select2();\r\n                helper.Select2Ajax({\r\n                    action: 'reportlist',\r\n                    multiple: true\r\n                });\r\n               /**\r\n                * Filter area\r\n                */\r\n                $(document).on('click',\".filterform #id_filter_clear\",function(e) {\r\n                    $(this).parents('.mform').trigger(\"reset\");\r\n                    var activityelement = $(this).parents('.mform').find('#id_filter_activities');\r\n                    var instancelement = $(this).parents('.block_reportdashboard').find('.report_dashboard_container');\r\n                    var reportid = instancelement.data('reportid');\r\n                    var reporttype = instancelement.data('reporttype');\r\n                    var instanceid = instancelement.data('blockinstance');\r\n                    var userelement = $(this).parents('.mform').find('#id_filter_users');\r\n                    // reportjs.UserCourses({ userid: 0, reporttype: args.reporttype ,element: activityelement});\r\n                    // smartfilter.EnrolledUsers({ courseid: 0, element: activityelement});\r\n                    smartfilter.CourseActivities({ courseid: 0,element: activityelement });\r\n                    // $(\".filterform select[data-select2='1']\").select2(\"destroy\").select2({ theme: \"classic\" });\r\n                    $(\".filterform select[data-select2-ajax='1']\").val('0').trigger('change');\r\n                    $('.filterform')[0].reset();\r\n                    $(\".filterform #id_filter_clear\").attr('disabled', 'disabled');\r\n                    // $(\"select[data-select2='1']\").select2(\"destroy\").select2({ theme: \"classic\" });\r\n                    reportwidget.CreateDashboardwidget({reportid: reportid, reporttype: reporttype, instanceid: instanceid});\r\n                    // $(\".filterform #id_filter_clear\").attr('disabled', 'disabled');\r\n                });\r\n                $(document).on('change', \"select[name='filter_coursecategories']\", function(){\r\n                    var categoryid = this.value;\r\n                    var courseelement = $(this).closest('.mform').find('#id_filter_courses');\r\n                    if(courseelement.length != 0){\r\n                        smartfilter.categoryCourses({ categoryid: categoryid ,element: courseelement});\r\n                    }\r\n                });\r\n                $(document).on('change', \"select[name='filter_courses']\", function(){\r\n                    var courseid = this.value;\r\n                    var activityelement = $(this).closest('.mform').find('#id_filter_activities');\r\n                    var userelement = $(this).closest('.mform').find('#id_filter_users');\r\n                    if(activityelement.length != 0){\r\n                        smartfilter.CourseActivities({ courseid: courseid ,element: activityelement});\r\n                    }\r\n                });\r\n\r\n                /**\r\n                * Duration buttons\r\n                */\r\n                RadiosToSlider.init($('#segmented-button'), {\r\n                    size: 'medium',\r\n                    animation: true,\r\n                    reportdashboard: true\r\n                });\r\n                /**\r\n                * Duration Filter\r\n                */\r\n                flatpickr('#customrange',{\r\n                    mode: 'range',\r\n                    onOpen: function(selectedDates, dateStr,instance){\r\n                        instance.clear();\r\n                    },\r\n                    onClose: function(selectedDates, dateStr, instance) {\r\n                        $('#ls_fstartdate').val(selectedDates[0].getTime() / 1000);\r\n                        $('#ls_fenddate').val((selectedDates[1].getTime() / 1000) + (60 * 60 * 24));\r\n                        require(['block_learnerscript/reportwidget'], function(reportjs) {\r\n                            reportwidget.DashboardTiles();\r\n                            reportwidget.DashboardWidgets();\r\n                        });\r\n                    }\r\n                });\r\n                /**\r\n                 * Escape dropdown on click of window\r\n                 */\r\n                window.onclick = function(event) {\r\n                    if (!event.target.matches('.dropbtn')) {\r\n                        var dropdowns = document.getElementsByClassName(\"dropdown-content\");\r\n                        var i;\r\n                        for (i = 0; i < dropdowns.length; i++) {\r\n                            var openDropdown = dropdowns[i];\r\n                            if ($(openDropdown).hasClass('show')) {\r\n                                $(openDropdown).toggleClass('show');\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * Add reports as blocks to dashboard\r\n             * @return {[type]} [description]\r\n             */\r\n            addblocks_to_dashboard: function() {\r\n                Str.get_string('addblockstodashboard','block_reportdashboard'\r\n                ).then(function(s) {\r\n                    if($('.reportslist').html().length > 0){\r\n                        console.log(\"here\");\r\n                         $('.reportslist').dialog();\r\n                    } else{\r\n\r\n                    $.urlParam = function(name){\r\n                    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\r\n                    if (results === null || results == ' ' ){\r\n                       return null;\r\n                    } else{\r\n                       return results[1] || 0;\r\n                    }\r\n                }\r\n                var role=$.urlParam('role');\r\n                var dashboardurl=$.urlParam('dashboardurl');\r\n                var contextlevel=$.urlParam('contextlevel');\r\n                var promise = Ajax.call([{\r\n                    methodname: 'block_reportdashboard_addwidget_to_dashboard',\r\n                    args: {\r\n                        role: role,\r\n                        dashboardurl: dashboardurl,\r\n                        contextlevel: contextlevel,\r\n                    },\r\n                }]);\r\n                promise[0].done(function(response) {\r\n                    var widget_title_img = \"<img class='dialog_title_icon' alt='Add Widgets' src='\" +\r\n                        M.util.image_url(\"add_widgets_icon\", \"block_reportdashboard\") + \"'/>\";\r\n                    $('.reportslist').dialog({\r\n                        title: 'Add widgets to dashboard',\r\n                        modal: true,\r\n                        minWidth: 700,\r\n                        maxHeight: 600\r\n                    });\r\n                    $('.reportslist').closest(\".ui-dialog\")\r\n                        .find(\".ui-dialog-titlebar-close\")\r\n                        .removeClass(\"ui-dialog-titlebar-close\")\r\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                    $('.reportslist').closest(\".ui-dialog\").find('.ui-dialog-title')\r\n                        .html(widget_title_img + 'Add widgets to dashboard');\r\n                     resp = JSON.parse(response);\r\n                     console.log(resp);\r\n                    $('.reportslist').html(resp);\r\n                }).fail(function(ex) {\r\n                    // do something with the exception\r\n                     console.log('Add Tiles');\r\n                });\r\n            }\r\n                });\r\n            },\r\n            addtiles_to_dashboard: function() {\r\n                Str.get_string('addtilestodashboard','block_reportdashboard'\r\n                ).then(function(s) {\r\n                    if($('.statistics_reportslist').html().length > 0) {\r\n                        $('.statistics_reportslist').dialog();\r\n                    } else {\r\n                     $.urlParam = function(name){\r\n                    var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);\r\n                    if (results === null || results == ' ' ){\r\n                       return null;\r\n                    } else{\r\n                       return results[1] || 0;\r\n                    }\r\n                }\r\n\r\n                var role=$.urlParam('role');\r\n                var dashboardurl=$.urlParam('dashboardurl');\r\n                var contextlevel=$.urlParam('contextlevel');\r\n                var promise = Ajax.call([{\r\n                    methodname: 'block_reportdashboard_addtiles_to_dashboard',\r\n                     args: {\r\n                        role: role,\r\n                        dashboardurl: dashboardurl,\r\n                        contextlevel: contextlevel,\r\n                    },\r\n                }]);\r\n                 promise[0].done(function(response) {\r\n                    var tile_title_img = \"<img class='dialog_title_icon' alt='Add Tiles' src='\" +\r\n                        M.util.image_url(\"add_tiles_icon\", \"block_reportdashboard\") + \"'/>\";\r\n                    $('.statistics_reportslist').dialog({\r\n                        title: 'Add tiles to dashboard',\r\n                        modal: true,\r\n                        minWidth: 600,\r\n                        maxHeight: 600\r\n                    });\r\n                    $('.statistics_reportslist').closest(\".ui-dialog\")\r\n                        .find(\".ui-dialog-titlebar-close\")\r\n                        .removeClass(\"ui-dialog-titlebar-close\")\r\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                    $('.statistics_reportslist').closest(\".ui-dialog\").find('.ui-dialog-title')\r\n                        .html(tile_title_img + 'Add tiles to dashboard');\r\n                    resp = JSON.parse(response);\r\n                    $('.statistics_reportslist').html(resp);\r\n                    }).fail(function(ex) {\r\n                    // do something with the exception\r\n                     console.log('Add Tiles');\r\n                });\r\n                }\r\n                });\r\n            },\r\n            addnewdashboard: function() {\r\n                Str.get_string('addnewdashboard','block_reportdashboard'\r\n                ).then(function(s) {\r\n                    document.getElementById(\"id_dashboard\").value = '';\r\n                    $(\"#id_error_dashboard\").css('display', 'none');\r\n                    var tile_title_img = \"<img class='dialog_title_icon' alt='Add new dashboard' src='\" +\r\n                        M.util.image_url(\"add_tiles_icon\", \"block_reportdashboard\") + \"'/>\";\r\n                    $('.newreport_dashboard').dialog({\r\n                        title: s,\r\n                        modal: true,\r\n                        minWidth: 450,\r\n                        maxHeight: 600\r\n                    });\r\n                    $('.newreport_dashboard').closest(\".ui-dialog\")\r\n                        .find(\".ui-dialog-titlebar-close\")\r\n                        .removeClass(\"ui-dialog-titlebar-close\")\r\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                        var Closebutton = $('.ui-icon-closethick').parent();\r\n                        $(Closebutton).attr({\r\n                            \"title\" : \"Close\"\r\n                        });\r\n                    $('.newreport_dashboard').closest(\".ui-dialog\").find('.ui-dialog-title')\r\n                        .html(tile_title_img + s);\r\n                });\r\n            },\r\n            updatedashboard: function(oldname,role){\r\n                Str.get_string('updatedashboard','block_reportdashboard'\r\n                ).then(function(s) {\r\n                    $( \"#id_error_dashboard\" ).css('display', 'none');\r\n                    $( \"#id_error_dashboard_nospaces\" ).css('display', 'none');\r\n                    var tile_title_img = \"<img class='dialog_title_icon' alt='Add new dashboard' src='\" +\r\n                        M.util.image_url(\"add_tiles_icon\", \"block_reportdashboard\") + \"'/>\";\r\n                    $('.newreport_dashboard').dialog({\r\n                        title: s,\r\n                        modal: true,\r\n                        minWidth: 450,\r\n                        maxHeight: 600\r\n                    });\r\n                    $('.newreport_dashboard').closest(\".ui-dialog\")\r\n                        .find(\".ui-dialog-titlebar-close\")\r\n                        .removeClass(\"ui-dialog-titlebar-close\")\r\n                        .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                        var Closebutton = $('.ui-icon-closethick').parent();\r\n                        $(Closebutton).attr({\r\n                            \"title\" : \"Close\"\r\n                        });\r\n                    $('.newreport_dashboard').closest(\".ui-dialog\").find('.ui-dialog-title')\r\n                        .html(tile_title_img + s);\r\n                    document.getElementById(\"id_dashboard\").value = oldname;\r\n                    $(\"#createdashbaord_form\").submit(function(event){\r\n\r\n                        var dashboardname = $( \"#id_dashboard\" ).val();\r\n                        var name = dashboardname.trim();\r\n                        if (name == '' || name == null) {\r\n                            $( \"#id_error_dashboard\" ).css('display', 'block');\r\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'none');\r\n                            event.preventDefault();\r\n                            return false;\r\n                        }\r\n                        spaceexist = name.indexOf(\" \");\r\n                        if (spaceexist > 0 && spaceexist != '') {\r\n                            $( \"#id_error_dashboard\" ).css('display', 'none');\r\n                            $( \"#id_error_dashboard_nospaces\" ).css('display', 'block');\r\n                            event.preventDefault();\r\n                            return false;\r\n                        }\r\n\r\n                        var args = {};\r\n                        args.action = 'updatedashboard';\r\n                        args.role = role;\r\n                        args.oldname = oldname;\r\n                        args.newname = document.getElementById(\"id_dashboard\").value ;\r\n                        senddata = JSON.stringify(args);\r\n                        var promise = ajax.call({\r\n                            args:args,\r\n                            url: M.cfg.wwwroot + \"/blocks/reportdashboard/ajax.php\"\r\n                        });\r\n                    });\r\n                });\r\n            },\r\n            sendreportemail: function(args) {\r\n                Str.get_strings([{\r\n                    key: 'sendemail',\r\n                    component: 'block_reportdashboard'\r\n                }]).then(function(s) {\r\n                    var url = M.cfg.wwwroot + '/blocks/learnerscript/ajax.php';\r\n                    args.nodeContent = 'sendreportemail' + args.instanceid;\r\n                    args.action = 'sendreportemail';\r\n                    args.title = s;\r\n                    AjaxForms = require('block_learnerscript/ajaxforms');\r\n                    AjaxForms.init(args, url);\r\n                });\r\n            },\r\n            reportfilter: function(args) {\r\n                var self = this;\r\n                if ($('.report_filter_' + args.instanceid).length < 1) {\r\n                    var promise = Ajax.call([{\r\n                        methodname: 'block_learnerscript_reportfilter',\r\n                        args: {\r\n                            action: 'reportfilter',\r\n                            reportid: args.reportid,\r\n                            instance: args.instanceid\r\n                        }\r\n                    }]);\r\n                    promise[0].done(function(resp) {\r\n                        $('body').append(\"<div class='report_filter_\" + args.instanceid + \"' style='display:none;'>\" + resp + \"</div>\");\r\n                        $(\"select[data-select2-ajax='1']\").each(function() {\r\n                            if (!$(this).hasClass('select2-hidden-accessible')) {\r\n                                helper.Select2Ajax({});\r\n                            }\r\n                        });\r\n                        self.reportFilterFormModal(args);\r\n                         $('.filterform'+args.instanceid+' .fitemtitle').hide();\r\n                          $('.filterform'+args.instanceid+' .felement').attr('style','margin:0');\r\n                    });\r\n                } else {\r\n                    self.reportFilterFormModal(args);\r\n                }\r\n            },\r\n            reportFilterFormModal: function (args) {\r\n                Str.get_string('reportfilters','block_reportdashboard'\r\n                ).then(function(s) {\r\n                    var title_img = \"<img class='dialog_title_icon' alt='Filter' src='\" +\r\n                        M.util.image_url(\"reportfilter\", \"block_reportdashboard\") + \"'/>\";\r\n                    $(\".report_filter_\" + args.instanceid).dialog({\r\n                        title: s,\r\n                        dialogClass: 'reportfilter-popup',\r\n                        modal: true,\r\n                        resizable: true,\r\n                        autoOpen: true,\r\n                        draggable: false,\r\n                        width: 420,\r\n                        height: 'auto',\r\n                        appendTo: \"#inst\" + args.instanceid,\r\n                        position: {\r\n                            my: \"center\",\r\n                            at: \"center\",\r\n                            of: \"#inst\" + args.instanceid,\r\n                            within: \"#inst\" + args.instanceid\r\n                        },\r\n                        open: function(event, ui) {\r\n                        $(this).closest(\".ui-dialog\")\r\n                            .find(\".ui-dialog-titlebar-close\")\r\n                            .removeClass(\"ui-dialog-titlebar-close\")\r\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                            var Closebutton = $('.ui-icon-closethick').parent();\r\n                            $(Closebutton).attr({\r\n                                \"title\" : \"Close\"\r\n                            });\r\n\r\n                        $(this).closest(\".ui-dialog\")\r\n                            .find('.ui-dialog-title').html(title_img + s);\r\n\r\n                        /* Submit button */\r\n                        $(\".report_filter_\" + args.instanceid + \" form  #id_filter_apply\").click(function(e) {\r\n                            e.preventDefault();\r\n                            e.stopImmediatePropagation();\r\n                            // console.log($(\"#reportcontainer\" + args.instanceid).html().length);\r\n                            if ($(\"#reportcontainer\" + args.instanceid).html().length > 0 ) {\r\n                                args.reporttype = $(\"#reportcontainer\" + args.instanceid).data('reporttype');\r\n                            } else {\r\n                                args.reporttype = $(\"#plotreportcontainer\" + args.instanceid).data('reporttype');\r\n                            }\r\n                            var reportfilter = $(\".filterform\" + args.instanceid).serializeArray();\r\n                            args.container = '#reporttype_' + args.reportid;\r\n\r\n                            require(['block_learnerscript/reportwidget'], function(reportwidget) {\r\n                                reportwidget.CreateDashboardwidget({reportid: args.reportid,\r\n                                                             reporttype: args.reporttype,\r\n                                                             instanceid: args.instanceid});\r\n                                $(\".report_filter_\" + args.instanceid).dialog('close');\r\n                            });\r\n                            $(\".report_filter_\" + args.instanceid + \" form #id_filter_clear\").removeAttr('disabled');\r\n                        });\r\n                    }\r\n                });\r\n                $(\".report_filter_\" + args.instanceid + \" form #id_filter_clear\").click(function(e) {\r\n                    e.preventDefault();\r\n                    $(\".filterform\" + args.reportid).trigger(\"reset\");\r\n                    require(['block_learnerscript/reportwidget'], function(reportwidget) {\r\n                        reportwidget.DashboardWidgets(args);\r\n                        $(\".report_filter_\" + args.instanceid).dialog('close');\r\n                    });\r\n                    $(\".report_filter_\" + args.instanceid).dialog('close');\r\n                });\r\n            });\r\n            },\r\n            DeleteWidget: function(args) {\r\n                Str.get_string('deletewidget','block_reportdashboard'\r\n                ).then(function(s) {\r\n                    var trainers = $(\"#delete_dialog\" + args.instanceid).dialog({\r\n                        resizable: true,\r\n                        autoOpen: true,\r\n                        width: 460,\r\n                        height: 210,\r\n                        title: s,\r\n                        modal: true,\r\n                        // dialogClass: 'dialog_fixed',\r\n                        appendTo: \"#inst\" + args.instanceid,\r\n                        position: {\r\n                            my: \"center\",\r\n                            at: \"center\",\r\n                            of: \"#inst\" + args.instanceid,\r\n                            within: \"#inst\" + args.instanceid\r\n                        },\r\n                        open: function(event, ui) {\r\n                            $(this).closest(\".ui-dialog\")\r\n                                .find(\".ui-dialog-titlebar-close\")\r\n                                .removeClass(\"ui-dialog-titlebar-close\")\r\n                                .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                                var Closebutton = $('.ui-icon-closethick').parent();\r\n                                $(Closebutton).attr({\r\n                                    \"title\" : \"Close\"\r\n                                });\r\n                        }\r\n                    });\r\n                });\r\n            },\r\n            Deletedashboard: function(args) {\r\n                Str.get_string('deletedashboard','block_reportdashboard'\r\n                ).then(function(s) {\r\n                    var instancename = args.instance;\r\n                        $( \"#dashboard_delete_popup_\"+args.random).dialog({\r\n                            resizable: false,\r\n                            height: 150,\r\n                            width: 375,\r\n                            modal: true,\r\n                            title : s,\r\n                            open: function(event) {\r\n                            $(this).closest(\".ui-dialog\")\r\n                                .find(\".ui-dialog-titlebar-close\")\r\n                                .removeClass(\"ui-dialog-titlebar-close\")\r\n                                .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                                var Closebutton = $('.ui-icon-closethick').parent();\r\n                                $(Closebutton).attr({\r\n                                    \"title\" : \"Close\"\r\n                                });\r\n                            },\r\n                            close: function(event, ui) {\r\n                                $(this).dialog('destroy').hide();\r\n                            }\r\n                        });\r\n                });\r\n            },\r\n            /**\r\n             * Schedule report form in popup in dashboard\r\n             * @param  object args reportid\r\n             * @return Popup with schedule form\r\n             */\r\n            schreportform: function(args) {\r\n                var self = this;\r\n                Str.get_string('schedulereport','block_reportdashboard'\r\n                ).then(function(s) {\r\n                    var url = M.cfg.wwwroot + '/blocks/learnerscript/ajax.php';\r\n                    args.title = s;\r\n                    args.nodeContent = 'schreportform' + args.instanceid;\r\n                    args.action = 'schreportform';\r\n                    args.courseid = $('[name=\"filter_courses\"]').val();\r\n                    AjaxForms = require('block_learnerscript/ajaxforms');\r\n                    AjaxForms.init(args, url);\r\n                });\r\n            }\r\n        };\r\n    });\r\n"],"file":"reportdashboard.min.js"}