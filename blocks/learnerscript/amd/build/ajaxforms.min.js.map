{"version":3,"sources":["../src/ajaxforms.js"],"names":["define","$","Str","ModalFactory","ModalEvents","Fragment","Ajax","schedule","select2","Y","Templates","Modal","helper","AjaxForms","args","url","contextid","nodeContent","init","prototype","modal","resp","getBody","self","dialogueclass","done","data","append","replaceNodeContents","html","title_img","position","reportid","width","my","at","action","M","util","image_url","instanceid","javascript","dlg","dialog","resizable","autoOpen","dialogClass","title","appendTo","of","within","close","remove","open","closest","find","removeClass","Closebutton","parent","attr","SelectRoleUsers","require","Select2Ajax","bind","e","preventDefault","submitFormAjax","pname","theme","document","on","stopImmediatePropagation","target","parents","switchClass","removeAttr","calcval","val","prop","fail","formdata","jsonformdata","JSON","stringify","promise","call","handleFormSubmissionResponse","formerror","component","app","angular","element","scope","pluginname","advancedcolumn","$apply","plugindata","id","pluginfullname","summary","type","lists","columns","elements","push","get_string","then","s","notifications","get_strings","key","cid","templatename","tabdata","CreateDashboardwidget","chartid","reporttype","chartname","issiteadmin","editicon","deleteicon","length","multiplot","enableplots","plottabs","render","tab","prepend","addClass","text","trigger","window","location","reload","handleFormSubmissionFailure","form","skipClientValidation","serialize","response","ex","console","log","submitForm","getRoot","submit"],"mappings":"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","sourcesContent":["/**\r\n * Add a create new group modal to the page.\r\n *\r\n * @module     block_learnerscript/ajaxforms\r\n * @class      AjaxForms\r\n * @package    block_learnerscript\r\n * @copyright  2017 Mukka Arun Kumar <arun@eabyas.in>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\ndefine(['jquery',\r\n        'core/str',\r\n        'core/modal_factory',\r\n        'core/modal_events',\r\n        'core/fragment',\r\n        'block_learnerscript/ajax',\r\n        'block_learnerscript/schedule',\r\n        'block_learnerscript/select2',\r\n        'core/yui',\r\n        'core/templates',\r\n        'core/modal',\r\n        'block_learnerscript/helper',\r\n        'jqueryui'\r\n        ],\r\n    function($, Str, ModalFactory, ModalEvents, Fragment, Ajax, schedule,select2, Y, Templates, Modal, helper) {\r\n\r\n        /**\r\n         * Constructor\r\n         *\r\n         * @param {Object} args Contains list of parameters.\r\n         * @param {string} url Ajax request URL.\r\n         *\r\n         * Each call to init gets it's own instance of this class.\r\n         */\r\n        var AjaxForms = function(args, url) {\r\n            this.args = args;\r\n            this.contextid = 1;\r\n            this.url = url;\r\n            this.nodeContent = args.nodeContent || 'ajaxForm';\r\n            this.init(this.args);\r\n        };\r\n\r\n        /**\r\n         * @var {Modal} modal\r\n         * @private\r\n         */\r\n        AjaxForms.prototype.modal = null;\r\n\r\n        /**\r\n         * @var {int} contextid\r\n         * @private\r\n         */\r\n        AjaxForms.prototype.contextid = -1;\r\n\r\n        /**\r\n         * Initialise the class.\r\n         *\r\n         * @param {String} selector used to find triggers for the new group modal.\r\n         * @private\r\n         * @return {Promise}\r\n         */\r\n        AjaxForms.prototype.init = function(args) {\r\n            var resp = this.getBody();\r\n            var self = this;\r\n            var dialogueclass = \"\";\r\n            resp.done(function(data) {\r\n                $('body').append(\"<div class='\" + self.nodeContent + \"'></div>\");\r\n                Templates.replaceNodeContents('.' + self.nodeContent, data.html, '');\r\n                var title_img = '';\r\n                var position = '#viewreport' + args.reportid;\r\n                var width = '80%';\r\n                var my = \"center top\";\r\n                var at =  \"center top\";\r\n                if (args.action == 'schreportform') {\r\n                    dialogueclass = 'schreportform';\r\n                    title_img = \"<img class='dialog_title_icon' alt='Schedule' src='\" +\r\n                        M.util.image_url(\"schreportform\", \"block_learnerscript\") + \"' />\";\r\n                    position = \"#inst\" + args.instanceid;\r\n                    width = '60%';\r\n                    my = \"center\";\r\n                    at =  \"center\";\r\n                } else if (args.action == 'advancedcolumns') {\r\n                    dialogueclass = 'advancedcolumns';\r\n                    position = \".ls_components\";                   \r\n                    width = '60%';\r\n                    my = \"center top\";\r\n                    at =  \"center top\";\r\n                } else if (args.action == 'sendreportemail') {\r\n                    dialogueclass = 'sendreportemail';\r\n                    title_img = \"<img class='dialog_title_icon' alt='Email' src='\" + M.util.image_url(\"email_icon\", \"block_learnerscript\") + \"'/>\";\r\n                    position = \"#inst\" + args.instanceid;\r\n                    width = '60%';\r\n                    my = \"center\";\r\n                    at =  \"center\";\r\n                }\r\n\r\n                $('head').append(data.javascript);\r\n\r\n                var dlg = $(\".\" + self.nodeContent).dialog({\r\n                    resizable: true,\r\n                    autoOpen: false,\r\n                    width: width,\r\n                    dialogClass: dialogueclass,\r\n                    // dialogClass: 'schedule-popup',\r\n                    title: self.args.title,\r\n                    modal: true,\r\n                    appendTo: position,\r\n                    position: {\r\n                        my: my,\r\n                        at: at,\r\n                        of: position,\r\n                        within: position\r\n                    },\r\n                    close: function(event, ui) {\r\n                        $(this).dialog('destroy').remove();\r\n                    },\r\n                    open: function() {\r\n                         $(this).closest(\".ui-dialog\")\r\n                                .find(\".ui-dialog-titlebar-close\")\r\n                                .removeClass(\"ui-dialog-titlebar-close\")\r\n                                .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                            var Closebutton = $('.ui-icon-closethick').parent();\r\n                            $(Closebutton).attr({\r\n                                \"title\" : \"Close\"\r\n                            });\r\n                        $(this).closest(\".ui-dialog\")\r\n                               .find('.ui-dialog-title').html(title_img + self.args.title);\r\n                    }\r\n                });\r\n                if (args.action == 'schreportform') {\r\n                    $(\".\" + self.nodeContent + \" select[data-select2='1']\").select2();\r\n                    schedule.SelectRoleUsers();\r\n                } else if (args.action == 'sendreportemail') {\r\n                    helper = require('block_learnerscript/helper');\r\n                    helper.Select2Ajax({\r\n                        'action': 'userlist',\r\n                        'reportid': args.reportid,\r\n                        'maximumSelectionLength': 0\r\n                    });\r\n                }\r\n                $('.' + self.nodeContent + ' .mform').bind('submit', function(e) {\r\n                    e.preventDefault();\r\n                    return self.submitFormAjax(this);\r\n                });\r\n\r\n                if (args.action == 'plotforms' && (args.pname == 'bar' || args.pname == 'column' || args.pname == 'line' || args.pname == 'combination')) {\r\n                    \r\n                    $(\".\" + self.nodeContent + \" select[data-select2='1']\").select2({\r\n                        theme: \"classic\"\r\n                    });\r\n                    $(document).on('click','.fa-eye', function(e){\r\n                        e.stopImmediatePropagation();\r\n                        $(e.target).parents('.form-group').find('*').attr('disabled', true);\r\n                        $(e.target).switchClass(\"fa-eye\", \"fa-eye-slash\");\r\n                        $(e.target).attr('title', 'Enable');\r\n                    });\r\n                    $(document).on('click','.fa-eye-slash', function(e){\r\n                        e.stopImmediatePropagation();\r\n                        $(e.target).parents('.form-group').find('*').removeAttr('disabled');\r\n                        $(e.target).switchClass( \"fa-eye-slash\", \"fa-eye\");\r\n                        $(e.target).attr('title', 'Disable');\r\n                    });\r\n                    $(document).on('change', '#id_calcs', function() {\r\n                        var calcval = $(this).val();\r\n                        if (calcval) {\r\n                            $('#id_columnsort').prop(\"disabled\", true);\r\n                            $('#id_sorting').prop(\"disabled\", true);\r\n                            $('#id_limit').prop(\"disabled\", true);\r\n                        } else {\r\n                            $('#id_columnsort').prop(\"disabled\", false);\r\n                            $('#id_sorting').prop(\"disabled\", false);\r\n                            $('#id_limit').prop(\"disabled\", false);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                dlg.dialog(\"open\");\r\n            }).fail(function(ex) {\r\n\r\n            });\r\n\r\n        };\r\n\r\n        /**\r\n         * @method getBody\r\n         * @private\r\n         * @return {Promise}\r\n         */\r\n        AjaxForms.prototype.getBody = function(formdata) {\r\n            if (typeof formdata === \"undefined\") {\r\n                formdata = null;\r\n            } else {\r\n                // Get the content of the modal.\r\n                this.args.jsonformdata = JSON.stringify(formdata);\r\n            }\r\n\r\n            var promise = Ajax.call({\r\n                args: this.args,\r\n                url: this.url\r\n            }, false);\r\n\r\n            return promise;\r\n        };\r\n\r\n        /**\r\n         * @method handleFormSubmissionResponse\r\n         * @private\r\n         * @return {Promise}\r\n         */\r\n        AjaxForms.prototype.handleFormSubmissionResponse = function(data) {\r\n            var helper = require('block_learnerscript/helper');\r\n            if (data.formerror) {\r\n                Templates.replaceNodeContents('.' + this.nodeContent, data.html, '');\r\n                $('head').append(data.javascript);\r\n\r\n                var self = this;\r\n                $('.' + this.nodeContent + ' .mform').bind('submit', function(e) {\r\n                    e.preventDefault();\r\n                    self.submitFormAjax(this);\r\n                });\r\n                if (this.args.action == 'schreportform') {\r\n                    $(\".\" + self.nodeContent+\" select[data-select2='1']\").select2();\r\n                    schedule.SelectRoleUsers();\r\n                } else if (this.args.action == 'sendreportemail') {\r\n                    helper = require('block_learnerscript/helper');\r\n                    helper.Select2Ajax({\r\n                        'action': 'userlist',\r\n                        'reportid': this.args.reportid,\r\n                        'maximumSelectionLength': 0\r\n                    });\r\n                }else{\r\n                    $(\".\" + self.nodeContent + \" select[data-select2='1']\").select2({\r\n                        theme: \"classic\"\r\n                    });\r\n                }\r\n            } else {\r\n                if (this.args.component == 'columns') {\r\n                    var app = angular.element(\".simpleDemo\").scope();\r\n                    var pluginname = this.args.advancedcolumn;\r\n                    app.$apply(function() {\r\n                        var plugindata = {};\r\n                        plugindata.id = data.data.id;\r\n                        delete data.data.id;\r\n                        plugindata.pluginname = pluginname;\r\n                        plugindata.pluginfullname = pluginname;\r\n                        plugindata.summary = '';\r\n                        plugindata.type = 'selectedcolumns';\r\n                        plugindata.formdata = data.data;\r\n                        app.lists.columns.elements.push(plugindata);\r\n                    });\r\n\r\n                    $(\".\" + this.nodeContent).dialog('destroy').remove();\r\n                } else {\r\n                    if (this.args.action == 'schreportform') {\r\n                        $(\".\" + this.nodeContent).dialog('close');\r\n                        Str.get_string('reportschedule', 'block_learnerscript').then(function(s) {\r\n                            helper.notifications(s);\r\n                        });\r\n                    } else if (this.args.action == 'plotforms') {\r\n                        var self = this;\r\n                        $(\".\" + this.nodeContent).dialog('close');\r\n                        Str.get_strings([{\r\n                            key: 'graphcreated',\r\n                            component: 'block_learnerscript'\r\n                        }, {\r\n                            key: 'graphupdated',\r\n                            component: 'block_learnerscript'\r\n                        }]).then(function(s) {\r\n                            var message;\r\n                            var cid;\r\n                            var templatename;\r\n                            var tabdata;\r\n                            if (self.args.type == 'add') {\r\n                                helper.notifications(s[0]);\r\n                                // $(\"#report_plottabs\").removeClass(\"ui-tabs-vertical ui-helper-clearfix\");\r\n                                // $(\"#report_plottabs li\").removeClass(\"ui-corner-left\");\r\n                                // var num_tabs = $(\"div#report_plottabs ul li\").length + 1;\r\n                                var reportid = self.args.reportid;\r\n                                cid = data.data.id;\r\n                                var CreateDashboardwidget = {};\r\n                                CreateDashboardwidget.reportid = reportid;\r\n                                CreateDashboardwidget.chartid = data.data.id;\r\n                                CreateDashboardwidget.reporttype = data.data.id;\r\n                                CreateDashboardwidget.pluginname = self.args.pname;\r\n                                CreateDashboardwidget.chartname = data.data.chartname;\r\n                                CreateDashboardwidget.issiteadmin = true;\r\n                                CreateDashboardwidget.editicon = M.util.image_url(\"t/edit\");\r\n                                Str.get_string(self.args.pname , 'block_learnerscript').then(function(s){\r\n                                    CreateDashboardwidget.title = s ;\r\n                                });\r\n                                CreateDashboardwidget.cid = data.data.id;\r\n                                CreateDashboardwidget.pname = self.args.pname;\r\n                                CreateDashboardwidget.type = 'edit';\r\n                                CreateDashboardwidget.deleteicon = M.util.image_url(\"t/delete\") ;\r\n                                CreateDashboardwidget.pname = self.args.pname;\r\n                                CreateDashboardwidget.type = 'edit';\r\n                                if ($('#report_plottabs').length > 0) {\r\n                                    templatename = 'block_learnerscript/tabs';\r\n                                    tabdata = CreateDashboardwidget;\r\n                                } else {\r\n                                    templatename = 'block_learnerscript/plottabs';\r\n                                    var CreateDashboardwidgetargs = {};\r\n                                    CreateDashboardwidgetargs.reportid = reportid;\r\n                                    CreateDashboardwidgetargs.multiplot = true;\r\n                                    CreateDashboardwidgetargs.enableplots = false;\r\n                                    CreateDashboardwidgetargs.plottabs = CreateDashboardwidget;\r\n                                    tabdata = CreateDashboardwidgetargs;\r\n                                }\r\n\r\n                                Templates.render(templatename, tabdata).done(function(tab) {\r\n                                    // $( \"#report_plottabs\" ).tabs( \"destroy\" );\r\n                                    if ($('#report_plottabs').length > 0) {\r\n                                        $(\"span#report_plottabs ul\").append(tab);\r\n                                    } else {\r\n                                        $(\"span.filter_buttons\").prepend(tab);\r\n                                    }\r\n\r\n                                    $('.plotgraphcontainer').removeClass('show').addClass('hide');\r\n                                    $('#plotreportcontainer' + reportid).html('');\r\n\r\n                                    // $('#report_plottabs').tabs().addClass(\"ui-tabs-vertical ui-helper-clearfix\");\r\n                                    // $(\"#report_plottabs li\").removeClass(\"ui-corner-top\");\r\n                                    // $(\"#report_plottabs li\").addClass(\"ui-corner-left\");\r\n                                    // $('#report_plottabs').tabs(\"refresh\");\r\n                                    // $('#' + data.data.id).trigger('click');\r\n                                });\r\n                            } else if (self.args.type == 'edit') {\r\n                                helper.notifications(s[1]);\r\n                                cid = self.args.cid;\r\n                                $('#lschartname' + cid).text(data.data.chartname);\r\n                                $('#' + cid).trigger('click');\r\n                            }\r\n                        });\r\n                    }  else if (this.args.action == 'sendreportemail') {\r\n                        $(\".\" + this.nodeContent).dialog('close');\r\n                        Str.get_string('mailscheduled', 'block_learnerscript').then(function(s) {\r\n                            helper.notifications(s);\r\n                        });\r\n                    } else {\r\n                        window.location.reload();\r\n                    }\r\n                }\r\n            }\r\n\r\n        };\r\n\r\n        /**\r\n         * @method handleFormSubmissionFailure\r\n         * @private\r\n         * @return {Promise}\r\n         */\r\n        AjaxForms.prototype.handleFormSubmissionFailure = function(data) {\r\n\r\n        };\r\n\r\n        /**\r\n         * Private method\r\n         *\r\n         * @method submitFormAjax\r\n         * @private\r\n         * @param {Event} e Form submission event.\r\n         */\r\n        AjaxForms.prototype.submitFormAjax = function(form) {\r\n            if (skipClientValidation) {\r\n                $('.' + this.nodeContent).dialog('destroy').remove();\r\n                return true;\r\n            }\r\n            // We don't want to do a real form submission.\r\n            // Convert all the form elements values to a serialised string.\r\n            this.args.jsonformdata = $(form).serialize();\r\n            var self = this;\r\n            var promise = Ajax.call({\r\n                args: this.args,\r\n                url: this.url\r\n            });\r\n            promise.done(function(response) {\r\n                return self.handleFormSubmissionResponse(response);\r\n            }).fail(function(ex) {\r\n                console.log(ex);\r\n            });\r\n        };\r\n\r\n        /**\r\n         * This triggers a form submission, so that any mform elements can do final tricks before the form submission is processed.\r\n         *\r\n         * @method submitForm\r\n         * @param {Event} e Form submission event.\r\n         * @private\r\n         */\r\n        AjaxForms.prototype.submitForm = function(e) {\r\n            e.preventDefault();\r\n            this.modal.getRoot().find('form').submit();\r\n        };\r\n\r\n        return /** @alias module:core_group/AjaxForms */ {\r\n            // Public variables and functions.\r\n            /**\r\n             * Attach event listeners to initialise this module.\r\n             *\r\n             * @method init\r\n             * @param {object} args The CSS selector used to find nodes that will trigger this module.\r\n             * @param {string} url Ajax request URL.\r\n             * @return {Promise}\r\n             */\r\n            init: function(args, url) {\r\n                return new AjaxForms(args, url);\r\n            }\r\n        };\r\n    });\r\n"],"file":"ajaxforms.min.js"}