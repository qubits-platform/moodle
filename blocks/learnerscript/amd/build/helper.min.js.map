{"version":3,"sources":["../src/helper.js"],"names":["define","$","ajax","AjaxForms","Str","ModalFactory","ModalEvents","Ajax","notification","smartfilter","helper","sendmessage","args","username","get_strings","key","component","then","s","userid","reportinstance","formid","container","parents","length","append","dlg","dialog","resizable","autoOpen","width","title","modal","dialogClass","show","effect","duration","position","my","at","of","within","open","closest","find","removeClass","html","Closebutton","parent","attr","not","each","remove","close","submit","e","preventDefault","require","emptymessage","document","getElementById","value","url","imageUrl","hide","promise","call","methodname","messages","touserid","text","serializeObject","message","textformat","done","notifications","fail","ex","ViewReportFilters","activefilter","toggleClass","inactivefilter","deleteConfirm","create","type","types","SAVE_CANCEL","body","setSaveButtonText","getRoot","on","save","action","addClass","reportid","tabdata","cid","console","log","destroy","bind","validatebasicform","validate","getreport","index","selectedval","val","push","Preview","Select2Ajax","instanceid","data","courses","setminimumInputLength","hasClass","select2","params","dataaction","basicparamdata","JSON","stringify","BasicparamsData","fiterdata","FilterData","reportinstanceid","schuserslist","scheduleid","roleid","split","contextlevel","extend","methodname2","$blockname","transport","success","parseJSON","processResults","page","pagination","total_count","results","items","more","escapeMarkup","markup","minimumInputLength","maximumSelectionLength","language","maximumSelected","maximum","templateResult","repo","loading","templateSelection","id","element","form","dataset","window","location","M","cfg","wwwroot","getQueryParameters","str","search","replace","map","n","DrilldownReport","self","click","drillurl","indexOf","ReportModelFromLink","tableid","tablewidth","parseInt","drilldata","filter","response","reportwidget","CreateDashboardwidget","reporttype","basicparams","ls_fstartdate","ls_fenddate","now","chart","SparkLineReport","dialogid","appendTo","prev","css","PlotForm","init","reportCalculations","get_string","title_img","util","image_url","ajaxStop","filters","filter_courses","reportname","table","dropdown","child","toggle","elements","notifytype","notify","tabsdraggable","sortable","cursor","axis","update","elementsorder","attribute","toString","rolesforcontext","template","end"],"mappings":"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","sourcesContent":["define(['jquery',\r\n        'block_learnerscript/ajax',\r\n        'block_learnerscript/ajaxforms',\r\n        'core/str',\r\n        'core/modal_factory',\r\n        'core/modal_events',\r\n        'core/ajax',\r\n        'core/notification',\r\n        'block_learnerscript/smartfilter',\r\n        'block_learnerscript/bootstrapnotify'\r\n    ],\r\n    function($, ajax, AjaxForms, Str, ModalFactory, ModalEvents, Ajax, notification, smartfilter) {\r\n        return helper = {\r\n            sendmessage: function(args, username) {\r\n                    Str.get_strings([{\r\n                    key: 'sendmessage',\r\n                    component: 'block_learnerscript'\r\n                }, {\r\n                    key: 'messageconformation',\r\n                    component: 'block_learnerscript'\r\n                }, {\r\n                    key: 'messagesent',\r\n                    component: 'block_learnerscript'\r\n                }]).then(function(s) {\r\n                var userid = args.userid;\r\n                var reportinstance = args.reportinstance;\r\n                var formid = \"form_sendsms\" + userid;\r\n                var container = $(\"#sendsms_\" + reportinstance + '_' + userid).parents('table');\r\n                if ($('#ls_sendsms_' + reportinstance + '_' + userid).length < 1) {\r\n                    $(\"#sendsms_\" + reportinstance + '_' + userid).append('<div id=\"ls_sendsms_' + reportinstance + '_' + userid + '\" class=\"sendmessage\"><div class=\"messageloading\"></div><form id=\"' + formid + '\" ><textarea id=\"text_' + formid + '\" type=\"text\" name=\"message\"></textarea><input type=\"submit\" value = \"Submit\"></form></div>');\r\n                }\r\n                var dlg = $('#ls_sendsms_' + reportinstance + '_' + userid).dialog({\r\n                    resizable: true,\r\n                    autoOpen: false,\r\n                    width: \"20%\",\r\n                    title: s[0],\r\n                    modal: false,\r\n                    dialogClass: 'sendsmsdialog',\r\n                    show: {\r\n                        effect: \"slide\",\r\n                        duration: 1000\r\n                    },\r\n                    position: {\r\n                        my: \"left\",\r\n                        at: \"right\",\r\n                        of: \"#sendsms_\" + reportinstance + '_' + userid,\r\n                        within: container\r\n                    },\r\n                    open: function(event, ui) {\r\n                        $(this).closest(\".ui-dialog\")\r\n                            .find(\".ui-dialog-titlebar-close\")\r\n                            .removeClass(\"ui-dialog-titlebar-close\")\r\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                            var Closebutton = $('.ui-icon-closethick').parent();\r\n                            $(Closebutton).attr({\r\n                                \"title\" : \"Close\"\r\n                            });\r\n                        $(\".sendmessage\").not(this).each(function() {\r\n                            $(this).remove();\r\n                        });\r\n                    },\r\n                    close: function(event, ui) {\r\n                        $(this).dialog('destroy').remove();\r\n                    }\r\n                });\r\n                dlg.dialog(\"open\");\r\n                $(\"#\" + formid).submit(function(e) {\r\n                    e.preventDefault();\r\n                    var helper = require('block_learnerscript/helper');\r\n                    var emptymessage = document.getElementById(\"text_\" + formid).value;\r\n                    if (!emptymessage) {\r\n                        $('.messageloading').html('<div class=\"alert alert-danger\">You must supply a value here</div>');\r\n                    } else {\r\n                        url = require('core/url');\r\n                        $('.messageloading').html('<center><img src=\"' + url.imageUrl(\"loader\", \"block_learnerscript\") + '\" alt=\"Message Sending\" title=\"Message Sending\"/></center>');\r\n                        $(\"#\" + formid).hide();\r\n                        var promise = Ajax.call([{\r\n                            methodname: 'core_message_send_instant_messages',\r\n                            args: {\r\n                                messages: [{\r\n                                    touserid: args.userid,\r\n                                    text: $(\"#\" + formid).serializeObject().message,\r\n                                    textformat: 0\r\n                                }]\r\n                            }\r\n                        }]);\r\n                    }\r\n                    promise[0].done(function(response) {\r\n                        var message = s[2] + username\r\n                        helper.notifications(message);\r\n                        dlg.dialog(\"close\");\r\n                    }).fail(function(ex) {\r\n                        // do something with the exception\r\n                        //  console.log(ex);\r\n                        $('.messageloading').html('<div class=\"alert alert-warning\">' + ex.message + '</div>');\r\n                        // $(\"#\"+formid).show();\r\n                    });\r\n                })\r\n            });\r\n            },\r\n            ViewReportFilters: function(args) {\r\n                $('.' + args.activefilter).toggleClass(\"show\");\r\n                $('.' + args.inactivefilter).removeClass(\"show\");\r\n            },\r\n            deleteConfirm: function(args) {\r\n                // var action = $(elem).data('action');\r\n                return Str.get_strings([{\r\n                    key: 'deleteconfirmation',\r\n                    component: 'block_learnerscript'\r\n                }, {\r\n                    key: 'deleteallconfirm',\r\n                    component: 'block_learnerscript'\r\n                },{\r\n                    key:'graphdeleted',\r\n                    component:'block_learnerscript'\r\n                },{\r\n                    key:'graphcannotbedeleted',\r\n                    component:'block_learnerscript'\r\n                }]).then(function(s) {\r\n                    ModalFactory.create({\r\n                        title: s[0],\r\n                        type: ModalFactory.types.SAVE_CANCEL,\r\n                        body: s[1]\r\n                    }).done(function(modal) {\r\n                        this.modal = modal;\r\n                        modal.setSaveButtonText('Confirm');\r\n                        modal.getRoot().on(ModalEvents.save, function(e) {\r\n                            e.preventDefault();\r\n                            var helper = require('block_learnerscript/helper');\r\n                            var promise = Ajax.call([{\r\n                                methodname: 'block_learnerscript_' + args.action,\r\n                                args: args\r\n                            }]);\r\n                            promise[0].done(function(resp) {\r\n                                $('.plotgraphcontainer').removeClass('show').addClass('hide');\r\n                                $('#plotreportcontainer' + args.reportid).html('');\r\n\r\n                                // var activetab = $( \"#report_plottabs\" ).tabs( \"option\", \"active\" );\r\n                                // var activetabid = $( \"#report_plottabs li:eq(\" + activetab + \")\" ).data('cid');\r\n                                var tabdata = $('#' + args.cid).attr('aria-controls');\r\n                                $(\"[data-cid='\" + args.cid + \"']\").remove();\r\n                                $('#' + tabdata).remove();\r\n                                // $('#report_plottabs').tabs('destroy').tabs();\r\n                                // $('#report_plottabs').tabs( \"refresh\" );\r\n                                // if ($( \"#report_plottabs li:eq(0) a\" ).length > 0) {\r\n                                //     $( \"#report_plottabs li:eq(0) a\" ).trigger('click');\r\n                                // } else\r\n                                if ($( \"#report_plottabs li:eq(0) a\" ).length < 1) {\r\n                                    $('#report_plottabs').remove();\r\n                                }\r\n\r\n                                helper.notifications(s[2]);\r\n                                // window.location.href = window.location.href;\r\n                            }).fail(function(ex) {\r\n                                // do something with the exception\r\n                                console.log(ex);\r\n                            });\r\n                            modal.hide();\r\n                            modal.destroy();\r\n                        }.bind(this));\r\n                        modal.show();\r\n                        $('.modal-header button.close').attr('title','Close');\r\n                    }.bind(this));\r\n                }.bind(this));\r\n            },\r\n            validatebasicform: function(validate) {\r\n                var getreport = [];\r\n                if (typeof validate == 'undefined') {\r\n                    $.each($('.basicparamsform select'), function(index, value) {\r\n                        var selectedval = $(value).val();\r\n                        if (selectedval == 0) {\r\n                            getreport.push(0);\r\n                        }\r\n                    });\r\n                }\r\n                return getreport;\r\n            },\r\n            Preview: function(args) {\r\n                $(args.container).dialog({\r\n                    dialogClass: 'previewpopup',\r\n                    width: '95%',\r\n                    modal: true,\r\n                    position: {\r\n                        my: 'center',\r\n                        at: 'center',\r\n                        within: '.ls_components'\r\n                        //of: 'body'\r\n                    },\r\n                    close: function() {\r\n                        $(this).dialog('destroy');\r\n                    },\r\n                    open: function() {\r\n                        $(this).closest(\".ui-dialog\")\r\n                            .find(\".ui-dialog-titlebar-close\")\r\n                            .removeClass(\"ui-dialog-titlebar-close\")\r\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                            var Closebutton = $('.ui-icon-closethick').parent();\r\n                            $(Closebutton).attr({\r\n                                \"title\" : \"Close\"\r\n                            });\r\n                        // $(this).closest(\".ui-dialog\")\r\n                        //     .find('.ui-dialog-title').html(title_img + self.args.title);\r\n                    }\r\n                });\r\n            },\r\n            /**\r\n             * Central method for call Select2 with Ajax in reports module\r\n             * @param object args Object with reportID and other required params\r\n             */\r\n            Select2Ajax: function(args) {\r\n                $(\"select[data-select2-ajax='1']\").each(function() {\r\n                    var instanceid = $(this).data('instanceid');\r\n                    var reportinstance = instanceid ? instanceid : args.reportid;\r\n                    if (args.action == 'rolewiseusers') {\r\n                        args.reportid = $(this).data('reportid');\r\n                        args.courses =  $('[name=\"filter_courses\"]').val();\r\n                    }\r\n                    if (args.action === 'userlist') {\r\n                        args.setminimumInputLength = 2;\r\n                        args.courses =  $('[name=\"filter_courses\"]').val();\r\n                    }\r\n                    if (!$(this).hasClass('select2-hidden-accessible')) {\r\n                        $(this).select2({\r\n                            // multiple: args.multiple || false,\r\n                            ajax: {\r\n                                data: function(params) {\r\n                                    var dataaction = $(this).data('action');\r\n\r\n                                    if (dataaction == 'filterusers' || dataaction == 'filtercourses') {\r\n                                        args.action = dataaction;\r\n                                        args.basicparamdata = JSON.stringify(smartfilter.BasicparamsData(reportinstance));\r\n                                        args.fiterdata = JSON.stringify(smartfilter.FilterData(reportinstance));\r\n                                        args.reportinstanceid = instanceid;\r\n                                        args.courses = $('[name=\"filter_courses\"]').val();\r\n\r\n                                    }\r\n                                    if (args.action == 'rolewiseusers') {\r\n                                        delete args.schuserslist;\r\n                                        delete args.scheduleid;\r\n                                        args.roleid = $(\"#id_role\" + reportinstance).val();\r\n                                        var roleid = args.roleid.split('_');\r\n                                        args.roleid = roleid[0];\r\n                                        args.contextlevel = roleid[1];\r\n                                        args.courses = $('[name=\"filter_courses\"]').val();\r\n\r\n                                    }\r\n                                    $.extend(params, args);\r\n                                    methodname2 = args.action;\r\n                                    if (methodname2 === 'userlist') {\r\n                                        $blockname = 'block_reportdashboard_';\r\n                                    } else {\r\n                                        $blockname = 'block_learnerscript_';\r\n                                    }\r\n\r\n                                    return params;\r\n                                },\r\n                                transport: function(params, success, failure) {\r\n                                    params.data.roleid = params.data.roleid;\r\n                                    var promise = Ajax.call([{\r\n                                        methodname: $blockname + methodname2,\r\n                                        args: params.data\r\n                                    }]);\r\n                                    promise[0].done(function(data) {\r\n                                        data = $.parseJSON(data);\r\n                                        success(data);\r\n                                    });\r\n                                    promise[0].fail(function(failure) {\r\n                                        // do something with the exception\r\n                                        //  console.log(failure);\r\n                                    });\r\n                                },\r\n                                processResults: function(data, params) {\r\n                                    // parse the results into the format expected by Select2\r\n                                    // since we are using custom formatting functions we do not need to\r\n                                    // alter the remote JSON data, except to indicate that infinite\r\n                                    // scrolling can be used\r\n                                    params.page = params.page || 1;\r\n                                    var pagination = false;\r\n                                    if (args.action === 'userlist' || args.action == 'filtercourses' || args.action == 'filterusers') {\r\n                                        pagination = false;\r\n                                    } else {\r\n                                        pagination = (params.page * 10) < data.total_count;\r\n                                    }\r\n                                    return {\r\n                                        results: data.items,\r\n                                        pagination: {\r\n                                                more: pagination\r\n                                        }\r\n                                    };\r\n                                }\r\n                            },\r\n                            escapeMarkup: function(markup) {\r\n                                return markup;\r\n                            }, // let our custom formatter work\r\n                            minimumInputLength: args.setminimumInputLength || 1,\r\n                            maximumSelectionLength: args.maximumSelectionLength,\r\n                            language: {\r\n                                // You can find all of the options in the language files provided in the\r\n                                // build. They all must be functions that return the string that should be\r\n                                // displayed.\r\n                                maximumSelected: function(params) {\r\n                                    if (args.action == 'rolewiseusers') {\r\n                                        args.roleid = $(\"#id_role\" + reportinstance).val();\r\n                                        args.schuserslist = $('#schuserslist' + reportinstance).val();\r\n                                        args.scheduleid = $(\"#scheduleid\").val() || -1;\r\n                                        return \"Click <a href='javascript:void(0);' class='seluser' id='addusers\" + args.reportid + \"' \\\r\n                                                     data-reportid=\" + args.reportid + \" data-scheduleid = \" + args.scheduleid + \" \\\r\n                        onclick = '(function(e){ require(\\\"block_learnerscript/schedule\\\").manageschusers(\\\r\n                                                     {reportinstance:\" + reportinstance + \", reportid:\" + args.reportid + \",scheduleid:\" + args.scheduleid + \",selectedroleid:\" + args.roleid + \",\\\r\n                                                     schuserslist:\\\"\" + args.schuserslist + \"\\\"}) })(event)' > here </a> to add more than \" + params.maximum + \" users.\";\r\n                                    }\r\n                                }\r\n                            },\r\n                            templateResult: function formatRepo(repo) {\r\n                                var markup;\r\n                                if (repo.loading) {\r\n                                    return repo.text || \"Values not supported\";\r\n                                }\r\n                                markup = repo.text || \"Values not supported\";\r\n                                return markup;\r\n                            }, // omitted for brevity, see the source of this page\r\n                            templateSelection: function formatRepoSelection(repo) {\r\n                                var markup;\r\n                                if (repo.id == -1 && args.action == 'rolewiseusers') {\r\n                                    var reportid = repo.element.form.dataset.reportid || 0;\r\n                                    var scheduleid = repo.element.form.dataset.scheduleid || -1;\r\n                                    markup = \"<a href='javascript:void(0)' class='viewschusers'\" +\r\n                                        \"onclick='(function(e){ require(\\\"block_learnerscript/schedule\\\").viewschusers( \\\r\n                                            {reportid:\" + reportid + \",scheduleid:\" + scheduleid + \", reportinstance:\" + reportinstance + \"}) })(event);'>\" + repo.text + \"</a>\";\r\n                                } else {\r\n                                    markup = repo.text;\r\n                                }\r\n                                return markup;\r\n                            } // omitted for brevity, see the source of this page\r\n                        }).on('select2:select', function(evt) {\r\n                            if (args.action == 'reportlist') {\r\n                                var reportid = $(this).val();\r\n                                window.location = M.cfg.wwwroot + '/blocks/learnerscript/viewreport.php?id=' + reportid;\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n            getQueryParameters: function(str) {\r\n                return (str || document.location.search).replace(/(\\?)/, '&').split(\"&\").map(function(n) { return n = n.split(\"=\"), this[n[0]] = n[1], this }.bind({}))[0];\r\n            },\r\n            DrilldownReport: function() {\r\n                var self = this;\r\n                //Drill down report\r\n                $('td a').click(function(e) {\r\n                    var url = $(this).attr('href');\r\n                    var drillurl = self.getQueryParameters(url);\r\n                    if (url.indexOf('viewreport.php') <= 0 || \"download\" in drillurl) {\r\n                        return;\r\n                    }\r\n                    e.preventDefault();\r\n                    self.ReportModelFromLink({ container: $(this), url: url });\r\n\r\n                });\r\n            },\r\n            ReportModelFromLink: function(args) {\r\n                var tableid = args.container.parents().closest('table').attr('id');\r\n                var tablewidth = $(\"#\" + tableid + \"\").width();\r\n                var drillurl = this.getQueryParameters(args.url);\r\n                var reportid = parseInt(drillurl.id);\r\n                var drilldata = $(this).data();\r\n                var filter = {};\r\n                if (args.url.indexOf('viewreport.php') <= 0 || \"download\" in drillurl) {\r\n                    return;\r\n                }\r\n                $.each(drillurl, function(key, val) {\r\n                    if (key.indexOf('filter') >= 0) {\r\n                        filter[key] = val;\r\n                    }\r\n                });\r\n                if ($(\"#reportcontainer\" + reportid).length == 0 || $(\"#plotreportcontainer\" + reportid).length == 0) {\r\n                    $('body').append('<div id=\"reportcontainer' + reportid + '\" style=\"display:none;\"></div>');\r\n                    $('body').append('<div id=\"plotreportcontainer' + reportid + '\" class=\"dialogplot\" style=\"display:none;\"></div>');\r\n                    var promise = ajax.call({\r\n                        args: {\r\n                            action: 'disablecolumnstatus',\r\n                            reportid: reportid\r\n                        },\r\n                        url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\r\n                    });\r\n                    promise.done(function(response) {\r\n                        var reporttypes = response;\r\n                        reportwidget.CreateDashboardwidget({\r\n                            reportid: reportid,\r\n                            reporttype: response,\r\n                            basicparams: JSON.stringify(filter),\r\n                            ls_fstartdate: 0,\r\n                            ls_fenddate: $.now()\r\n                        });\r\n                        chart.SparkLineReport();\r\n                        if(reporttypes == 'table') {\r\n                            dialogid = \"reportcontainer\";\r\n                        } else {\r\n                            dialogid = \"plotreportcontainer\";\r\n                        }\r\n                        var dlg = $(\"#\" + dialogid + reportid + \"\").dialog({\r\n                            resizable: true,\r\n                            autoOpen: false,\r\n                            dialogClass: \"drilldown\" + reportid,\r\n                            width: tablewidth,\r\n                            title: '',\r\n                            appendTo: \"#\" + tableid,\r\n                            modal: true,\r\n                            position: {\r\n                                my: \"center\",\r\n                                at: \"top\",\r\n                                of: \"#\" + tableid\r\n                            },\r\n                            open: function(event) {\r\n                                $(this).closest(\".ui-dialog\")\r\n                                    .find(\".ui-dialog-titlebar-close\")\r\n                                    .removeClass(\"ui-dialog-titlebar-close\")\r\n                                    .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                                    var Closebutton = $('.ui-icon-closethick').parent();\r\n                                    $(Closebutton).attr({\r\n                                        \"title\" : \"Close\"\r\n                                    });\r\n                                $(\".drilldown\" + reportid).append('<a href=' + args.url + '><span class=\"reportdashboard_right\">View more</span></a>');\r\n                            },\r\n                            close: function(event, ui) {\r\n                                $(this).dialog('destroy').remove();\r\n                            }\r\n                        });                \r\n                        dlg.dialog(\"open\").prev(\".ui-dialog-titlebar\").css(\"color\", \"#0C75B6\");\r\n                    });\r\n                }\r\n            },\r\n            PlotForm: function(args) {\r\n                url = M.cfg.wwwroot + '/blocks/learnerscript/ajax.php';\r\n                args.title = (!args.title) ? 'Plot Graph' : args.title;\r\n                AjaxForms.init(args, url);\r\n            },\r\n            reportCalculations: function(args) {\r\n                Str.get_string('calcs','block_learnerscript').then(function(s) {\r\n                var title_img = \"<img class='dialog_title_icon' alt='Calculations' src='\" +\r\n                    M.util.image_url(\"schedule_icon\", \"block_learnerscript\") + \"'/>\";\r\n                var dlg = $(\".reportcalculation\" + args.reportid).dialog({\r\n                    dialogClass: 'calculationspopup',\r\n                    resizable: false,\r\n                    autoOpen: false,\r\n                    width: \"50%\",\r\n                    title: 'Calculations',\r\n                    modal: true,\r\n                    position: {\r\n                        my: \"center\",\r\n                        at: \"center\",\r\n                        of: window\r\n                    },\r\n                    open: function(event, ui) {\r\n                        $(\".reportcalculation\" + args.reportid).append('<img src=\"' + M.util.image_url('loading', 'block_learnerscript') + '\" id=\"loadingimage\" />');\r\n                        $(document).ajaxStop(function() {\r\n                            $(\"#loadingimage\").remove();\r\n                        });\r\n                        $(this).closest(\".ui-dialog\").find(\".ui-dialog-titlebar-close\")\r\n                            .removeClass(\"ui-dialog-titlebar-close\")\r\n                            .html(\"<span class='ui-button-icon-primary ui-icon ui-icon-closethick'></span>\");\r\n                            var Closebutton = $('.ui-icon-closethick').parent();\r\n                            $(Closebutton).attr({\r\n                                \"title\" : \"Close\"\r\n                            });\r\n                        $(this).closest(\".ui-dialog\").find('.ui-dialog-title')\r\n                            .html('Calculations');\r\n                    }\r\n\r\n                });\r\n                args.filters = smartfilter.FilterData(args.reportid);\r\n                args.filters['ls_fstartdate'] = $('#ls_fstartdate').val();\r\n                args.filters['ls_fenddate'] = $('#ls_fenddate').val();\r\n                if (typeof args.filters['filter_courses'] == 'undefined') {\r\n                    var filter_courses = $('#ls_courseid').val();\r\n                    if (filter_courses != 1) {\r\n                        args.filters['filter_courses'] = filter_courses;\r\n                    }\r\n                }\r\n                args.filters = JSON.stringify(args.filters);\r\n\r\n                args.action = 'reportcalculations';\r\n\r\n                args.basicparams = args.basicparams || JSON.stringify(smartfilter.BasicparamsData(args.reportid));\r\n                var promise = ajax.call({\r\n                    args: args,\r\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\"\r\n                });\r\n                promise.done(function(response) {\r\n                    $(\".reportcalculation\" + args.reportid).closest(\".ui-dialog\").find('.ui-dialog-title')\r\n                        .html(response.reportname + ' : Calculations');\r\n                    $(\".reportcalculation\" + args.reportid).html(response.table);\r\n                }).fail(function(ex) {\r\n                    // do something with the exception\r\n                    //  console.log(ex);\r\n                });\r\n                dlg.dialog(\"open\");\r\n                }.bind(this));\r\n            },\r\n            dropdown: function(child) {\r\n                $('#' + child).toggle();\r\n            },\r\n            notifications: function(elements, notifytype){\r\n                notifytype = notifytype || 'success';\r\n                $.notify({\r\n                    message: elements\r\n                },{\r\n                    type: notifytype\r\n                }\r\n                );\r\n            },\r\n            tabsdraggable: function($tabs) {\r\n                $( \".ls-plotgraphs_list\" ).sortable({\r\n                    cursor: 'move',\r\n                    axis: 'y',\r\n                    update: function (event, ui) {\r\n                        var elementsorder = $('.ls-plotgraphs_list').sortable('toArray', {attribute: 'data-cid'}).toString();\r\n                        var promise = ajax.call({\r\n                            args: {\r\n                                action: 'tabsposition',\r\n                                reportid: $('.ls-plotgraphs_list').data('reportid'),\r\n                                component: 'plot',\r\n                                elementsorder: elementsorder\r\n                            },\r\n                            url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\"\r\n                        });\r\n                    }\r\n                });\r\n            },\r\n            rolesforcontext: function(contextlevel, reportid){\r\n                var promise = ajax.call({\r\n                    args: {\r\n                        action: 'contextroles',\r\n                        contextlevel: contextlevel,\r\n                        reportid: reportid\r\n                    },\r\n                    url: M.cfg.wwwroot + \"/blocks/learnerscript/ajax.php\",\r\n                });\r\n                promise.done(function(response) {\r\n                    var template = '';\r\n                    $.each(response, function(key, value) {\r\n                        template += '<option value = ' + key + '>' + value + '</option>';\r\n                    });\r\n                    $(\"#id_roleid\").find('option').remove().end().append(template);\r\n                });\r\n            }\r\n        }\r\n    });\r\n"],"file":"helper.min.js"}