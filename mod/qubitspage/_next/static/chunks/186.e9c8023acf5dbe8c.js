"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{7186:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var o=n(5893),s=n(7294),a=n(7357),r=n(3321),i=n(1536),l=n(3350),c=n(5861),d=n(8456),h=n(655),u=n(4282),m=n(4613),p=n(4981);n(4007),n(9899);let x=e=>new Promise(t=>setTimeout(t,e));var g=void 0;sqlite3InitModule({print:console.log,printErr:console.error}).then(function(e){g=e});let f=async(e,t)=>{console.log(e);let n=await j(),o=n.oo1,s=new o.DB("/data.db","cw"),a=()=>{try{e.split("\n").forEach(e=>{if(e.startsWith("--"))return;let n=e.split(/\s/).slice(0,1)[0].toLowerCase();if("create"==n){s.exec(e);let n="created Table successfully";console.log(typeof n),t(n)}else if("insert"==n)s.exec(e),t("Inserted Data Successfully");else if("select"==n){let n=[],o=[];s.exec({sql:e,rowMode:"object",resultRows:n,columnNames:o}),o.join("");let a="";n.forEach(e=>{void 0===e.id&&(e.id=""),a+="<span>".concat(e.id," ").concat(e.name," ").concat(e.age,"</span> <br>")}),t(a)}else"delete"==n&&s.exec(e)})}catch(e){alert(e.message.split(":"))}},r=e.split("\n")[0];if(-1!=r.search("DATA")&&r.startsWith("--")){let e=r.split(":")[1].trim();y("./".concat(e),{headers:{"Content-Type":"text/plain"},method:"GET"}).then(e=>e.text()).then(e=>{e.split("\n").forEach(e=>{if(""!==(e=e.trim()))try{s.exec(e)}catch(e){console.log(e.message)}})}).then(()=>{a()}).catch(e=>alert("Unable to load data file: "+e.message))}else a()},y=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e3;return Promise.race([fetch(e,t),new Promise((e,t)=>setTimeout(()=>t(Error("timeout")),n))])},j=async()=>{if(g)return g;await x(5e3).then(()=>{if(!g)throw Error("Sqlite didnt initialize.. reload your browser and try");return g})};var w="";let v=["Python initialization complete",'File "/',"CodeRunner","mod = compile","self.ast"],b=async e=>(""!=w&&(w=""),await loadPyodide({stdout:function(t){return Z(t,e)}})),S=async(e,t,n)=>{let o=await b(t);try{let s=await o.loadPackagesFromImports(e);(s=await o.runPythonAsync(e))?k(s,t):""!==w?k(s,t):t(""),n(!0)}catch(e){n(!0),Z(e.message,t)}};function Z(e,t){e.split("\n").forEach(e=>{v.some(t=>e.includes(t))||k(e,t)})}function k(e,t){e&&t(w+=e+"\n")}let N=async(e,t,n)=>{S(e,t,n)},C=async(e,t,n)=>{try{let o=await loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.21.3/full/"});await o.loadPackage("micropip");let s=o.pyimport("micropip");await s.install("https://cdn.jsdelivr.net/gh/qubits-platform/pytutor@master/dist/pytutor-1.0.0-py3-none-any.whl");let a=await o.runPythonAsync('import json\nfrom pytutor import generate_trace\ncode = """\n'.concat(e,'\n"""\ntrace = generate_trace.run_logger(code, "")\ntrace_dict = json.loads(trace)\njson.dumps(trace_dict, indent=2)\n'));a&&(n(""),t(JSON.parse(a)))}catch(e){console.log(e)}},E=async(e,t,n)=>{C(e,t,n)};var I=n(637);function P(e){let{content:t,language:n}=e,s=n?I.Z.highlight(n,t):I.Z.highlightAuto(t);return(0,o.jsx)("pre",{className:"hljs",children:(0,o.jsx)("code",{className:"language-".concat(n," hljs"),dangerouslySetInnerHTML:{__html:s.value}})})}var T=n(3894),_=n(7922),A=n(4674),L=n(7085);let z=s.forwardRef(function(e,t){return(0,o.jsx)(L.Z,{elevation:6,ref:t,variant:"filled",...e})});var B=n(6422);let{Configuration:F,OpenAIApi:O}=n(6485),D=e=>{let{output:t,code:n,getHints:s,getDebuggerStatus:a,getLog:i,IsErrorCatch:d}=e,h=new F({apiKey:"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"}),u=new O(h),m=async(e,t)=>{d(!0),a("loading");let n='\n        "The below given python program was executed and the output was observed. \n        First, workout your own solution to the problem based on the comments.\n        Then, analyze the output of the program and try to understand the error.\n        Your task is to:\n        * Provide hints on how to fix the error observed in the output and the fixed python code\n        * IF the program has logical errors, provide hints on how to fix the logical errors and the fixed python code\n        \n        Your response should be in JSON.\n        Provide the output as JSON format with the following keys: "hints", "fixedCode".\n    \n        Program:\n        <start>\n        '.concat("".concat(t),"\n        <end>\n\n        Output:\n        <start>\n        ").concat("".concat(e),'\n        <end>\n        "');try{let e=await u.createChatCompletion({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are helping a student who is in 8th grade who is trying to learn programming"},{role:"user",content:n}],temperature:0}),t=JSON.parse(e.data.choices[0].message.content);s(t),a("done")}catch(e){d(!1),i(e.response.data.error.message)}};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(l.Z,{title:(0,o.jsx)(c.Z,{fontSize:12,children:"AI Assistant"}),placement:"top",children:(0,o.jsx)(r.Z,{variant:"outlined",endIcon:(0,o.jsx)(B.Z,{}),className:"ai-help-button",onClick:()=>m(t,n)})})})};function R(e){let{dataChage:t,value:n,language:x,editable:g,uniqID:y,input:j,handleReset:w,visualization:v,reset:b}=e,[S,Z]=(0,s.useState)(""),[k,C]=(0,s.useState)(""),[I,L]=(0,s.useState)(!1),[B,F]=(0,s.useState)(!1),[O,R]=(0,s.useState)(!1),[q,J]=(0,s.useState)(""),[M,U]=(0,s.useState)(!1),[W,G]=(0,s.useState)(!1),[H,K]=(0,s.useState)(""),[Y,V]=(0,s.useState)(),[$,X]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(!0),et=async(e,t)=>{L(!0),R(!1),J(""),Z("Running..."),K(""),G(!1),"python"===t&&(j&&""==document.getElementById("txt_ID").value?(document.getElementById("txt_ID").focus(),Z("")):N(e,Z,X)),"sql"===t&&f(e,Z),L(!1)},en=e=>{L(!0),K(""),R(!1),E(e,C,Z)};(0,s.useEffect)(()=>{var e,t,n,o;!k||(null===(e=k.trace)||void 0===e?void 0:e[0].exception_msg)?k&&(null===(t=k.trace)||void 0===t?void 0:t[0].exception_msg)&&(L(!1),K(null===(o=k.trace)||void 0===o?void 0:o[0].exception_msg),G(!0)):(n=new ExecutionVisualizer("TraceBlock"+y,k,{debugMode:!1,showAllFrameLabels:!0,lang:"py3",highlightLines:!0,arrowLines:!1}),L(!1),n.redrawConnectors())},[k]),(0,s.useEffect)(()=>{S&&S.search("Traceback")&&F(!0)},[S]),(0,s.useEffect)(()=>{},[q]);let eo=()=>(0,o.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mt:2},children:(0,o.jsx)(d.Z,{})}),es=()=>{G(!1)},ea=e=>{if(e){R(!0),G(!1),K("");let t=e.hints.slice(0,e.hints.lastIndexOf(".")),n=t.split(".");V(n),J(e)}},er=()=>{U(!0)},ei=e=>{"loading"===e?(J(""),R(!0)):"done"===e&&L(!1)},el=e=>{K("Error Occurred while trying to get hints. Please retry"),G(!0)};return(0,o.jsxs)("div",{className:"editor-container",children:[!g&&(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(p.ZP,{mode:x,highlightActiveLine:!1,id:1,value:n,maxLines:50,showGutter:!1,fontSize:14,editorProps:{$blockScrolling:!1},onChange:t,width:"100%",readOnly:g,height:"100%"})}),g&&(0,o.jsx)(P,{language:x,content:n}),S&&(0,o.jsxs)("div",{className:"console-wrapper",children:[B&&$&&(0,o.jsx)(D,{output:S,code:n,getHints:ea,getDebuggerStatus:ei,getLog:el,setShowAIDebugBtn:X,IsErrorCatch:ee}),(0,o.jsx)("code",{className:"resultTextareaStyle w-100",readOnly:!0,children:"python"===x?(0,o.jsx)("pre",{children:S}):(0,T.ZP)(S)})]}),O&&(0,o.jsx)(o.Fragment,{children:q.hints?(0,o.jsx)("div",{className:"console-wrapper",children:(0,o.jsxs)("div",{className:"resultTextareaStyleerror",children:[" ",(0,o.jsx)(r.Z,{variant:"outlined",className:"chatgptbtn",onClick:()=>er(),children:"Fix Code"})," ",(0,o.jsx)("div",{className:"hintstyle",children:(0,o.jsx)("ul",{children:null==Y?void 0:Y.map((e,t)=>(0,o.jsx)("li",{children:e},t))})}),(0,o.jsx)("br",{}),M&&(0,o.jsx)("div",{children:(0,o.jsx)(p.ZP,{mode:x,highlightActiveLine:!1,value:q.fixedCode,maxLines:50,showGutter:!1,fontSize:14,editorProps:{$blockScrolling:!1},width:"100%",readOnly:!0,height:"100%"})})," "]})}):Q&&(0,o.jsx)(eo,{})}),k&&!O&&!H&&(0,o.jsx)("div",{id:"TraceBlock"+y,className:"traceBlockStyle w-100"}),(0,o.jsx)(a.Z,{spacing:3,className:"button-toolbar",children:(0,o.jsxs)(i.Z,{direction:"row",gap:2,sx:{justifyContent:"flex-end"},children:[(0,o.jsx)(l.Z,{title:(0,o.jsx)(c.Z,{fontSize:12,children:"Run"}),placement:"top",children:(0,o.jsx)(r.Z,{variant:"outlined",endIcon:(0,o.jsx)(h.Z,{}),onClick:()=>et(n,x),className:"tool-button"})}),b&&(0,o.jsx)(l.Z,{title:(0,o.jsx)(c.Z,{fontSize:12,children:"Reset"}),placement:"top",children:(0,o.jsx)(r.Z,{variant:"outlined",endIcon:(0,o.jsx)(u.Z,{}),onClick:()=>w(y),className:"tool-button"})}),v&&(0,o.jsx)(l.Z,{title:(0,o.jsx)(c.Z,{fontSize:12,children:"Debug"}),placement:"top",children:(0,o.jsx)(r.Z,{variant:"outlined",endIcon:(0,o.jsx)(m.Z,{}),onClick:()=>en(n),className:"tool-button"})})]})}),I&&(0,o.jsx)(eo,{}),k&&(0,o.jsx)("div",{id:"TraceBlock"+y}),(0,o.jsx)(_.Z,{in:W,sx:{mt:2},children:(0,o.jsx)(z,{severity:"error",action:(0,o.jsx)(A.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:()=>es()}),sx:{mb:2},children:H})})]})}}}]);